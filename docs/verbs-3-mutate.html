<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter6 Verbs 3: mutate | book-example.utf8.md</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter6 Verbs 3: mutate | book-example.utf8.md" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter6 Verbs 3: mutate | book-example.utf8.md" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="verbs-2-group-by-and-summarise.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Study Guide for Cronkite Students</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html"><i class="fa fa-check"></i><b>1</b> R an R Studio tour</a><ul>
<li class="chapter" data-level="1.1" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#key-takeaways"><i class="fa fa-check"></i><b>1.1</b> Key takeaways</a></li>
<li class="chapter" data-level="1.2" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#why-program"><i class="fa fa-check"></i><b>1.2</b> Why program?</a><ul>
<li class="chapter" data-level="1.2.1" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#why-r"><i class="fa fa-check"></i><b>1.2.1</b> Why R?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#setting-up-r-and-r-studio"><i class="fa fa-check"></i><b>1.3</b> Setting up R and R Studio</a><ul>
<li class="chapter" data-level="1.3.1" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#rstudio-cloud"><i class="fa fa-check"></i><b>1.3.1</b> RStudio Cloud</a></li>
<li class="chapter" data-level="1.3.2" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#install-yourself"><i class="fa fa-check"></i><b>1.3.2</b> Install yourself</a></li>
<li class="chapter" data-level="1.3.3" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#an-r-studio-tour"><i class="fa fa-check"></i><b>1.3.3</b> An R Studio tour</a></li>
<li class="chapter" data-level="1.3.4" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#the-console"><i class="fa fa-check"></i><b>1.3.4</b> The Console</a></li>
<li class="chapter" data-level="1.3.5" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#packages"><i class="fa fa-check"></i><b>1.3.5</b> Packages</a></li>
<li class="chapter" data-level="1.3.6" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#work-in-projects"><i class="fa fa-check"></i><b>1.3.6</b> Work in projects</a></li>
<li class="chapter" data-level="1.3.7" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#error-messages"><i class="fa fa-check"></i><b>1.3.7</b> Error messages</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#resources-and-exercises"><i class="fa fa-check"></i><b>1.4</b> Resources and exercises</a><ul>
<li class="chapter" data-level="1.4.1" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#take-the-swirl-tutorial"><i class="fa fa-check"></i><b>1.4.1</b> Take the swirl() tutorial</a></li>
<li class="chapter" data-level="1.4.2" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#programming-concepts"><i class="fa fa-check"></i><b>1.4.2</b> Programming concepts</a></li>
<li class="chapter" data-level="1.4.3" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#r-and-r-studio"><i class="fa fa-check"></i><b>1.4.3</b> R and R Studio</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>2</b> R Markdown</a><ul>
<li class="chapter" data-level="2.1" data-path="r-markdown.html"><a href="r-markdown.html#key-takeaways-1"><i class="fa fa-check"></i><b>2.1</b> Key takeaways</a></li>
<li class="chapter" data-level="2.2" data-path="r-markdown.html"><a href="r-markdown.html#understanding-markdown"><i class="fa fa-check"></i><b>2.2</b> Understanding Markdown</a><ul>
<li class="chapter" data-level="2.2.1" data-path="r-markdown.html"><a href="r-markdown.html#formatting-in-markdown"><i class="fa fa-check"></i><b>2.2.1</b> Formatting in Markdown</a></li>
<li class="chapter" data-level="2.2.2" data-path="r-markdown.html"><a href="r-markdown.html#code-chunks"><i class="fa fa-check"></i><b>2.2.2</b> Code chunks</a></li>
<li class="chapter" data-level="2.2.3" data-path="r-markdown.html"><a href="r-markdown.html#viewing-your-document"><i class="fa fa-check"></i><b>2.2.3</b> Viewing your document</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-markdown.html"><a href="r-markdown.html#resources"><i class="fa fa-check"></i><b>2.3</b> Resources</a><ul>
<li class="chapter" data-level="2.3.1" data-path="r-markdown.html"><a href="r-markdown.html#exercises-and-assignments"><i class="fa fa-check"></i><b>2.3.1</b> Exercises and assignments</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-frames-and-the-tidyverse.html"><a href="data-frames-and-the-tidyverse.html"><i class="fa fa-check"></i><b>3</b> Data frames and the tidyverse</a><ul>
<li class="chapter" data-level="3.1" data-path="data-frames-and-the-tidyverse.html"><a href="data-frames-and-the-tidyverse.html#key-takeaways-2"><i class="fa fa-check"></i><b>3.1</b> Key takeaways</a></li>
<li class="chapter" data-level="3.2" data-path="data-frames-and-the-tidyverse.html"><a href="data-frames-and-the-tidyverse.html#data-frames"><i class="fa fa-check"></i><b>3.2</b> Data frames</a></li>
<li class="chapter" data-level="3.3" data-path="data-frames-and-the-tidyverse.html"><a href="data-frames-and-the-tidyverse.html#the-tidyverse"><i class="fa fa-check"></i><b>3.3</b> The tidyverse</a></li>
<li class="chapter" data-level="3.4" data-path="data-frames-and-the-tidyverse.html"><a href="data-frames-and-the-tidyverse.html#loading-data"><i class="fa fa-check"></i><b>3.4</b> Loading data</a><ul>
<li class="chapter" data-level="3.4.1" data-path="data-frames-and-the-tidyverse.html"><a href="data-frames-and-the-tidyverse.html#column-names"><i class="fa fa-check"></i><b>3.4.1</b> Column names</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html"><i class="fa fa-check"></i><b>4</b> Verbs 1: Select and filter</a><ul>
<li class="chapter" data-level="4.1" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#key-takeaways-3"><i class="fa fa-check"></i><b>4.1</b> Key takeaways</a></li>
<li class="chapter" data-level="4.2" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#load-the-tidyverse-and-the-data"><i class="fa fa-check"></i><b>4.2</b> Load the tidyverse and the data</a></li>
<li class="chapter" data-level="4.3" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#create-a-new-data-frame-from-an-old-one"><i class="fa fa-check"></i><b>4.3</b> Create a new data frame from an old one</a></li>
<li class="chapter" data-level="4.4" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#select---choosing-columns"><i class="fa fa-check"></i><b>4.4</b> Select - choosing columns</a><ul>
<li class="chapter" data-level="4.4.1" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#optional-other-ways-to-select"><i class="fa fa-check"></i><b>4.4.1</b> Optional: Other ways to select</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#filter---choosing-rows"><i class="fa fa-check"></i><b>4.5</b> Filter - choosing rows</a><ul>
<li class="chapter" data-level="4.5.1" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#one-filter"><i class="fa fa-check"></i><b>4.5.1</b> One filter</a></li>
<li class="chapter" data-level="4.5.2" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#a-compound-filter"><i class="fa fa-check"></i><b>4.5.2</b> A compound filter</a></li>
<li class="chapter" data-level="4.5.3" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#an-even-more-compound-filter"><i class="fa fa-check"></i><b>4.5.3</b> An even more compound filter</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#arrange---change-the-order"><i class="fa fa-check"></i><b>4.6</b> Arrange - change the order</a></li>
<li class="chapter" data-level="4.7" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#traps"><i class="fa fa-check"></i><b>4.7</b> Traps</a><ul>
<li class="chapter" data-level="4.7.1" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#case-sensitivity"><i class="fa fa-check"></i><b>4.7.1</b> Case-sensitivity</a></li>
<li class="chapter" data-level="4.7.2" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#equals-versus-double-equals"><i class="fa fa-check"></i><b>4.7.2</b> Equals versus double-equals</a></li>
<li class="chapter" data-level="4.7.3" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#forgetting-the-and-then-operator"><i class="fa fa-check"></i><b>4.7.3</b> Forgetting the “and then” operator (%&gt;%)</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#resources-1"><i class="fa fa-check"></i><b>4.8</b> Resources</a><ul>
<li class="chapter" data-level="4.8.1" data-path="verbs-1-select-and-filter.html"><a href="verbs-1-select-and-filter.html#tutorials"><i class="fa fa-check"></i><b>4.8.1</b> Tutorials</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="verbs-2-group-by-and-summarise.html"><a href="verbs-2-group-by-and-summarise.html"><i class="fa fa-check"></i><b>5</b> Verbs 2: group_by and summarise</a><ul>
<li class="chapter" data-level="5.1" data-path="verbs-2-group-by-and-summarise.html"><a href="verbs-2-group-by-and-summarise.html#key-takeaways-4"><i class="fa fa-check"></i><b>5.1</b> Key takeaways</a></li>
<li class="chapter" data-level="5.2" data-path="verbs-2-group-by-and-summarise.html"><a href="verbs-2-group-by-and-summarise.html#read-in-some-data"><i class="fa fa-check"></i><b>5.2</b> Read in some data</a></li>
<li class="chapter" data-level="5.3" data-path="verbs-2-group-by-and-summarise.html"><a href="verbs-2-group-by-and-summarise.html#group_by-summarise-verbs"><i class="fa fa-check"></i><b>5.3</b> group_by / summarise () verbs</a><ul>
<li class="chapter" data-level="5.3.1" data-path="verbs-2-group-by-and-summarise.html"><a href="verbs-2-group-by-and-summarise.html#summarizing-data-with-group_by"><i class="fa fa-check"></i><b>5.3.1</b> Summarizing data with group_by</a></li>
<li class="chapter" data-level="5.3.2" data-path="verbs-2-group-by-and-summarise.html"><a href="verbs-2-group-by-and-summarise.html#another-example-by-state"><i class="fa fa-check"></i><b>5.3.2</b> Another example: by state</a></li>
<li class="chapter" data-level="5.3.3" data-path="verbs-2-group-by-and-summarise.html"><a href="verbs-2-group-by-and-summarise.html#optional-subtotals"><i class="fa fa-check"></i><b>5.3.3</b> Optional: Subtotals</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="verbs-2-group-by-and-summarise.html"><a href="verbs-2-group-by-and-summarise.html#resources-2"><i class="fa fa-check"></i><b>5.4</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="verbs-3-mutate.html"><a href="verbs-3-mutate.html"><i class="fa fa-check"></i><b>6</b> Verbs 3: mutate</a><ul>
<li class="chapter" data-level="6.1" data-path="verbs-3-mutate.html"><a href="verbs-3-mutate.html#key-takeaways-5"><i class="fa fa-check"></i><b>6.1</b> Key takeaways</a></li>
<li class="chapter" data-level="6.2" data-path="verbs-3-mutate.html"><a href="verbs-3-mutate.html#read-in-some-data-1"><i class="fa fa-check"></i><b>6.2</b> Read in some data</a></li>
<li class="chapter" data-level="6.3" data-path="verbs-3-mutate.html"><a href="verbs-3-mutate.html#simple-arithmetic"><i class="fa fa-check"></i><b>6.3</b> Simple arithmetic</a></li>
<li class="chapter" data-level="6.4" data-path="verbs-3-mutate.html"><a href="verbs-3-mutate.html#create-categories"><i class="fa fa-check"></i><b>6.4</b> Create categories</a></li>
<li class="chapter" data-level="6.5" data-path="verbs-3-mutate.html"><a href="verbs-3-mutate.html#standardize-data"><i class="fa fa-check"></i><b>6.5</b> Standardize data</a></li>
<li class="chapter" data-level="6.6" data-path="verbs-3-mutate.html"><a href="verbs-3-mutate.html#resources-3"><i class="fa fa-check"></i><b>6.6</b> Resources</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="verbs-3-mutate" class="section level1">
<h1><span class="header-section-number">Chapter6</span> Verbs 3: mutate</h1>
<div id="key-takeaways-5" class="section level2">
<h2><span class="header-section-number">6.1</span> Key takeaways</h2>
<p>NOTE: Most journalism tutorials do group_by/summarise BEFORE they introduce mutate. But most computer science tutorials reverse that order. The reason is that journalists often don’t have datasets that have many numbers, so the simple arithmetic isn’t as important.</p>
<ul>
<li><p><em>mutate</em> just means “compute”, or convert one or more variables into something new.</p></li>
<li><p>mutate is the same thing as creating a new column in Excel with a formula</p></li>
<li><p>There are several common mutate tasks. The most important for us are:</p>
<ul>
<li>Convert unstandardized data into standardized, such as yes-or-no variables or all lower case</li>
<li>Use arithmetic on numeric variables</li>
<li>Use conditional statements to put different values on variables, instead of filtering one at a time.</li>
</ul></li>
<li><p>OPTIONAL:</p>
<ul>
<li>Mutate can replace text or values</li>
<li>Change the data <em>type</em> from, say, text to date and time.</li>
</ul></li>
</ul>
</div>
<div id="read-in-some-data-1" class="section level2">
<h2><span class="header-section-number">6.2</span> Read in some data</h2>
<p>We’ve read the Serial Killer Detective from the New Yorker in class. The project makes the dataset public, and Andrew Ba Tran uses the entire country’s data in his online course at <a href="https://learn.r-journalism.com/en/">R for Journalists</a>. I’ve taken that dataset, made it a little simpler and pulled out just the Arizona cases.</p>
<p>As always, load the tidyverse</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" title="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>And load a dataset saved in native R format from our course website:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1"><span class="kw">load</span> (<span class="kw">url</span>(<span class="st">&quot;https://cronkitedata.github.io/cronkite-docs/assets/data/r-data/murders.Rda&quot;</span>))</a>
<a class="sourceLine" id="cb50-2" title="2"><span class="co">#print out the structure of the dataset</span></a>
<a class="sourceLine" id="cb50-3" title="3"><span class="kw">str</span>(murders)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    29655 obs. of  18 variables:
##  $ id                    : Factor w/ 719011 levels &quot;197601001AKASP00&quot;,..: 41 42 43 44 45 46 47 48 49 50 ...
##  $ cntyfips              : num  4005 4013 4013 4013 4013 ...
##  $ ori                   : Factor w/ 12616 levels &quot;AK00101&quot;,&quot;AK00102&quot;,..: 570 586 589 590 593 595 598 620 642 650 ...
##  $ state                 : Factor w/ 54 levels &quot;Alaska&quot;,&quot;Alabama&quot;,..: 4 4 4 4 4 4 4 4 4 4 ...
##  $ agency                : chr  &quot;Flagstaff&quot; &quot;Maricopa County&quot; &quot;Chandler&quot; &quot;El Mirage&quot; ...
##  $ agency_type           : Factor w/ 8 levels &quot;Sheriff&quot;,&quot;County police&quot;,..: 3 1 3 3 3 3 3 3 3 3 ...
##  $ solved                : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 2 1 2 2 2 2 2 2 1 2 ...
##  $ year                  : num  1976 1976 1976 1976 1976 ...
##  $ situation             : Factor w/ 6 levels &quot;Single victim/single offender&quot;,..: 1 2 1 1 1 1 1 1 2 1 ...
##  $ victim_age            : num  1 18 19 20 43 0 38 26 67 58 ...
##  $ victim_sex            : Factor w/ 3 levels &quot;Female&quot;,&quot;Male&quot;,..: 2 1 2 2 2 1 2 2 2 2 ...
##  $ victim_race           : Factor w/ 5 levels &quot;Asian or Pacific Islander&quot;,..: 5 5 5 2 5 5 5 2 5 5 ...
##  $ weapon                : Factor w/ 17 levels &quot;Firearm, type not stated&quot;,..: 8 6 2 2 6 8 2 4 12 4 ...
##  $ circumstance          : Factor w/ 32 levels &quot;Rape&quot;,&quot;Robbery&quot;,..: 28 32 30 18 29 11 18 31 6 18 ...
##  $ vic_relate_to_offender: Factor w/ 29 levels &quot;Acquaintance&quot;,..: 24 26 25 2 12 6 5 25 26 12 ...
##  $ offender_age          : num  20 999 51 24 32 19 44 27 999 29 ...
##  $ offender_sex          : Factor w/ 3 levels &quot;Female&quot;,&quot;Male&quot;,..: 2 3 2 1 2 1 1 2 3 2 ...
##  $ offender_race         : Factor w/ 5 levels &quot;Asian or Pacific Islander&quot;,..: 5 4 5 2 2 5 5 5 4 5 ...</code></pre>
</div>
<div id="simple-arithmetic" class="section level2">
<h2><span class="header-section-number">6.3</span> Simple arithmetic</h2>
<p>Use the usual arithmetic operators to calculate numbers:</p>
<pre><code>  + Addition
  - Subtraction
  * Multiplication
  / Division
  </code></pre>
<p>Using Andrew’s example, calcuate the difference in age between the victim and the offender, but only when both exist. (The dataset codes the age as 999 when it’s not available.)</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" title="1">murders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb53-2" title="2"><span class="st">  </span><span class="kw">select</span> ( id, state, agency, solved, year, victim_age, offender_age) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb53-3" title="3"><span class="st">  </span><span class="kw">filter</span> ( victim_age <span class="op">&lt;</span><span class="st"> </span><span class="dv">999</span> <span class="op">&amp;</span><span class="st"> </span>offender_age <span class="op">&lt;</span><span class="st"> </span><span class="dv">999</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb53-4" title="4"><span class="st">  </span><span class="kw">mutate</span> (  <span class="dt">age_diff_from_offender  =</span> </a>
<a class="sourceLine" id="cb53-5" title="5">                offender_age <span class="op">-</span><span class="st"> </span>victim_age) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb53-6" title="6"><span class="st">  </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>##                 id   state    agency solved year victim_age offender_age
## 1 197601001AZ00301 Arizona Flagstaff    Yes 1976          1           20
## 2 197601001AZ00705 Arizona  Chandler    Yes 1976         19           51
## 3 197601001AZ00707 Arizona El Mirage    Yes 1976         20           24
## 4 197601001AZ00713 Arizona  Glendale    Yes 1976         43           32
## 5 197601001AZ00717 Arizona      Mesa    Yes 1976          0           19
## 6 197601001AZ00723 Arizona   Phoenix    Yes 1976         38           44
##   age_diff_from_offender
## 1                     19
## 2                     32
## 3                      4
## 4                    -11
## 5                     19
## 6                      6</code></pre>
</div>
<div id="create-categories" class="section level2">
<h2><span class="header-section-number">6.4</span> Create categories</h2>
<p>In this case, we might just want to note whether the offender was older or younger than the victim. This is a conditional statement. R has two ways to do conditionals:</p>
<ul>
<li>if_else : Use it when there are only two possible outcomes, yes or no</li>
<li>case_when : Use it when there are several different possible conditions or outcomes.</li>
</ul>
<p>We’ll stick with if_else for now, which has the syntax:</p>
<pre><code>    if_else   (   condition , 
                  value if true, 
                  value if false
                  )</code></pre>
<p>Here’s what the new variable might look like:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1">murders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb56-2" title="2"><span class="st">  </span><span class="kw">select</span> ( id, state, agency, solved, year, victim_age, offender_age) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb56-3" title="3"><span class="st">  </span><span class="kw">filter</span> ( victim_age <span class="op">&lt;</span><span class="st"> </span><span class="dv">999</span> <span class="op">&amp;</span><span class="st"> </span>offender_age <span class="op">&lt;</span><span class="st"> </span><span class="dv">999</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb56-4" title="4"><span class="st">  </span><span class="kw">mutate</span> (  <span class="dt">victim_younger_older =</span> </a>
<a class="sourceLine" id="cb56-5" title="5">                <span class="kw">if_else</span> (victim_age <span class="op">&lt;</span><span class="st"> </span>offender_age, </a>
<a class="sourceLine" id="cb56-6" title="6">                         <span class="st">&quot;Younger&quot;</span>, </a>
<a class="sourceLine" id="cb56-7" title="7">                         <span class="st">&quot;Older or the same&quot;</span>)</a>
<a class="sourceLine" id="cb56-8" title="8">          ) <span class="op">%&gt;%</span><span class="st">    </span></a>
<a class="sourceLine" id="cb56-9" title="9"><span class="st">  </span><span class="kw">select</span> (<span class="op">-</span>year, <span class="op">-</span>solved)   <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># ex. take away vars with minus sign</span></a>
<a class="sourceLine" id="cb56-10" title="10"><span class="st">  </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>##                 id   state    agency victim_age offender_age
## 1 197601001AZ00301 Arizona Flagstaff          1           20
## 2 197601001AZ00705 Arizona  Chandler         19           51
## 3 197601001AZ00707 Arizona El Mirage         20           24
## 4 197601001AZ00713 Arizona  Glendale         43           32
## 5 197601001AZ00717 Arizona      Mesa          0           19
## 6 197601001AZ00723 Arizona   Phoenix         38           44
##   victim_younger_older
## 1              Younger
## 2              Younger
## 3              Younger
## 4    Older or the same
## 5              Younger
## 6              Younger</code></pre>
<p>Note that because we only have two choices, we have to code people of the same age in one of the two groups. You’d use case_when if you wanted to create three groups.</p>
<p>Keep this in mind when we get to group_by. It’s a way to create categories you can use in groups.</p>
</div>
<div id="standardize-data" class="section level2">
<h2><span class="header-section-number">6.5</span> Standardize data</h2>
<p>There are several problems that often come with datasets in the wild: They have extra spaces floating around that are considered important characters, or they’re in mixed case form, or they use different words for the same thing. When you find these, you’ll want to use “string” operations to standardize them. One example is lower-casing all words so you don’t need to pay attention to them. In this case, we’re replacing the original variable with its lower-cased one.</p>
<p>(This generally isn’t a good idea – you’d usually create a new variable, because you may need to get back to the original some day. But if you’re creating a new dataset, it’s not as important.):</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1">murders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-2" title="2"><span class="st">  </span><span class="kw">select</span> ( agency) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-3" title="3"><span class="st">  </span><span class="kw">mutate</span> (<span class="dt">agency =</span> <span class="kw">tolower</span>(agency))  <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-4" title="4"><span class="st">  </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>##            agency
## 1       flagstaff
## 2 maricopa county
## 3        chandler
## 4       el mirage
## 5        glendale
## 6            mesa</code></pre>
</div>
<div id="resources-3" class="section level2">
<h2><span class="header-section-number">6.6</span> Resources</h2>
<ul>
<li>Andrew Ba Tran’s “R for Journalists”, bottom of chapter 3, “<a href="https://learn.r-journalism.com/en/wrangling/dplyr/dplyr/">Wrangling data</a>”<br />
</li>
<li>Mary Jo Webster’s “<a href="https://mjwebster.github.io/DataJ/R/IntroAnalysisWithR.html">Intro to analysis with Tidyverse</a>” is a walkthrough aimed at group by / summarise.</li>
<li>Go back to Pivot Tables in Excel - it’s the same thing.</li>
<li>Susan Baert’s dplyr tutorial: <a href="https://suzan.rbind.io/2018/04/dplyr-tutorial-4/">summarizing data</a></li>
<li>Matt Waite’s “<a href="http://mattwaite.github.io/sports/aggregates.html">Aggregates</a>” chapter</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="verbs-2-group-by-and-summarise.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
