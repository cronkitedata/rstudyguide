<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Data frames and the tidyverse | R Study Guide for Cronkite School of Journalism</title>
  <meta name="description" content="A companion book for the Cronkite School’s data journalism class for graduate students. A work in progress." />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Data frames and the tidyverse | R Study Guide for Cronkite School of Journalism" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://cronkitedata.github.io/rstudyguide" />
  
  <meta property="og:description" content="A companion book for the Cronkite School’s data journalism class for graduate students. A work in progress." />
  <meta name="github-repo" content="cronkitedata/rstudyguide" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Data frames and the tidyverse | R Study Guide for Cronkite School of Journalism" />
  
  <meta name="twitter:description" content="A companion book for the Cronkite School’s data journalism class for graduate students. A work in progress." />
  

<meta name="author" content="Sarah Cohen, Knight Chair in Journalism" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.io" type="image/x-icon" />
<link rel="prev" href="021-r-markdown.html"/>
<link rel="next" href="030-intro-verbs.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="mystyles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Study Guide for Cronkite Students</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="part"><span><b>I Introduction to R for Journalists</b></span></li>
<li class="chapter" data-level="1" data-path="011-r-install.html"><a href="011-r-install.html"><i class="fa fa-check"></i><b>1</b> An R and R Studio tour</a><ul>
<li class="chapter" data-level="1.1" data-path="011-r-install.html"><a href="011-r-install.html#key-takeaways"><i class="fa fa-check"></i><b>1.1</b> Key takeaways</a></li>
<li class="chapter" data-level="1.2" data-path="011-r-install.html"><a href="011-r-install.html#why-program"><i class="fa fa-check"></i><b>1.2</b> Why program?</a></li>
<li class="chapter" data-level="1.3" data-path="011-r-install.html"><a href="011-r-install.html#setting-up-r-and-r-studio"><i class="fa fa-check"></i><b>1.3</b> Setting up R and R Studio</a></li>
<li class="chapter" data-level="1.4" data-path="011-r-install.html"><a href="011-r-install.html#an-r-studio-tour"><i class="fa fa-check"></i><b>1.4</b> An R Studio tour</a><ul>
<li class="chapter" data-level="1.4.1" data-path="011-r-install.html"><a href="011-r-install.html#the-console"><i class="fa fa-check"></i><b>1.4.1</b> The Console</a></li>
<li class="chapter" data-level="1.4.2" data-path="011-r-install.html"><a href="011-r-install.html#packages"><i class="fa fa-check"></i><b>1.4.2</b> Packages</a></li>
<li class="chapter" data-level="1.4.3" data-path="011-r-install.html"><a href="011-r-install.html#work-in-projects"><i class="fa fa-check"></i><b>1.4.3</b> Work in projects</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="011-r-install.html"><a href="011-r-install.html#variables"><i class="fa fa-check"></i><b>1.5</b> Variables</a></li>
<li class="chapter" data-level="1.6" data-path="011-r-install.html"><a href="011-r-install.html#resources-and-exercises"><i class="fa fa-check"></i><b>1.6</b> Resources and exercises</a><ul>
<li class="chapter" data-level="1.6.1" data-path="011-r-install.html"><a href="011-r-install.html#googling-for-help"><i class="fa fa-check"></i><b>1.6.1</b> Googling for help</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="021-r-markdown.html"><a href="021-r-markdown.html"><i class="fa fa-check"></i><b>2</b> R Markdown</a><ul>
<li class="chapter" data-level="2.1" data-path="021-r-markdown.html"><a href="021-r-markdown.html#key-takeaways-1"><i class="fa fa-check"></i><b>2.1</b> Key takeaways</a></li>
<li class="chapter" data-level="2.2" data-path="021-r-markdown.html"><a href="021-r-markdown.html#getting-started-with-r-markdown"><i class="fa fa-check"></i><b>2.2</b> Getting started with R Markdown</a></li>
<li class="chapter" data-level="2.3" data-path="021-r-markdown.html"><a href="021-r-markdown.html#the-anatomy-of-a-document"><i class="fa fa-check"></i><b>2.3</b> The anatomy of a document</a></li>
<li class="chapter" data-level="2.4" data-path="021-r-markdown.html"><a href="021-r-markdown.html#knitting-your-document"><i class="fa fa-check"></i><b>2.4</b> Knitting your document</a></li>
<li class="chapter" data-level="2.5" data-path="021-r-markdown.html"><a href="021-r-markdown.html#code-chunks"><i class="fa fa-check"></i><b>2.5</b> Code chunks</a></li>
<li class="chapter" data-level="2.6" data-path="021-r-markdown.html"><a href="021-r-markdown.html#resources-and-exercises-1"><i class="fa fa-check"></i><b>2.6</b> Resources and exercises</a><ul>
<li class="chapter" data-level="" data-path="021-r-markdown.html"><a href="021-r-markdown.html#resources"><i class="fa fa-check"></i>Resources</a></li>
<li class="chapter" data-level="" data-path="021-r-markdown.html"><a href="021-r-markdown.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="022-data-frames.html"><a href="022-data-frames.html"><i class="fa fa-check"></i><b>3</b> Data frames and the tidyverse</a><ul>
<li class="chapter" data-level="3.1" data-path="022-data-frames.html"><a href="022-data-frames.html#key-takeaways-2"><i class="fa fa-check"></i><b>3.1</b> Key takeaways</a></li>
<li class="chapter" data-level="3.2" data-path="022-data-frames.html"><a href="022-data-frames.html#getting-started"><i class="fa fa-check"></i><b>3.2</b> Getting started</a></li>
<li class="chapter" data-level="3.3" data-path="022-data-frames.html"><a href="022-data-frames.html#the-data-frame"><i class="fa fa-check"></i><b>3.3</b> The data frame</a><ul>
<li class="chapter" data-level="3.3.1" data-path="022-data-frames.html"><a href="022-data-frames.html#loading-and-looking-at-data"><i class="fa fa-check"></i><b>3.3.1</b> Loading and looking at data</a></li>
<li class="chapter" data-level="3.3.2" data-path="022-data-frames.html"><a href="022-data-frames.html#examine-your-data"><i class="fa fa-check"></i><b>3.3.2</b> Examine your data</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="022-data-frames.html"><a href="022-data-frames.html#introducing-the-pipe"><i class="fa fa-check"></i><b>3.4</b> Introducing the pipe</a></li>
<li class="chapter" data-level="3.5" data-path="022-data-frames.html"><a href="022-data-frames.html#take-a-break"><i class="fa fa-check"></i><b>3.5</b> Take a break</a></li>
<li class="chapter" data-level="3.6" data-path="022-data-frames.html"><a href="022-data-frames.html#other-resources-1"><i class="fa fa-check"></i><b>3.6</b> Other resources</a><ul>
<li class="chapter" data-level="3.6.1" data-path="022-data-frames.html"><a href="022-data-frames.html#on-your-own"><i class="fa fa-check"></i><b>3.6.1</b> On your own</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II The Verbs of the Tidyverse</b></span></li>
<li class="chapter" data-level="4" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html"><i class="fa fa-check"></i><b>4</b> A quick tour of verbs</a><ul>
<li class="chapter" data-level="4.1" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#key-takeaways-3"><i class="fa fa-check"></i><b>4.1</b> Key takeaways</a><ul>
<li class="chapter" data-level="" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#data-for-this-walkthrough"><i class="fa fa-check"></i>Data for this walkthrough</a></li>
<li><a href="030-intro-verbs.html#the-operator-and-then">The <code>%&gt;%</code> operator: … and then…</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#looking-at-your-data-in-pieces-and-in-order"><i class="fa fa-check"></i><b>4.2</b> Looking at your data in pieces and in order</a><ul>
<li class="chapter" data-level="4.2.1" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#select-to-pick-out-columns"><i class="fa fa-check"></i><b>4.2.1</b> <code>select</code> to pick out columns</a></li>
<li class="chapter" data-level="4.2.2" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#arrange-to-sort"><i class="fa fa-check"></i><b>4.2.2</b> <code>arrange</code> to sort</a></li>
<li class="chapter" data-level="4.2.3" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#filter-to-pick-out-rows"><i class="fa fa-check"></i><b>4.2.3</b> <code>filter</code> to pick out rows</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#group_by-and-summarise-to-count-and-sum"><i class="fa fa-check"></i><b>4.3</b> <code>group_by</code> and <code>summarise</code> to count and sum</a><ul>
<li class="chapter" data-level="4.3.1" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#mutate-to-calculate-something-new"><i class="fa fa-check"></i><b>4.3.1</b> <code>mutate</code> to calculate something new</a></li>
<li class="chapter" data-level="4.3.2" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#tk-left_join-to-merge-with-other-tables."><i class="fa fa-check"></i><b>4.3.2</b> TK <code>left_join</code> to merge with other tables.</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#resources-and-exercises-2"><i class="fa fa-check"></i><b>4.4</b> Resources and exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="031-select-filter.html"><a href="031-select-filter.html"><i class="fa fa-check"></i><b>5</b> Verbs Part 1: Picking and choosing</a><ul>
<li class="chapter" data-level="5.1" data-path="031-select-filter.html"><a href="031-select-filter.html#key-takeaways-4"><i class="fa fa-check"></i><b>5.1</b> Key takeaways</a></li>
<li class="chapter" data-level="5.2" data-path="031-select-filter.html"><a href="031-select-filter.html#select---choosing-columns"><i class="fa fa-check"></i><b>5.2</b> Select - choosing columns</a><ul>
<li class="chapter" data-level="" data-path="031-select-filter.html"><a href="031-select-filter.html#optional-other-ways-to-select"><i class="fa fa-check"></i>Optional: Other ways to select</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="031-select-filter.html"><a href="031-select-filter.html#filter---choosing-rows"><i class="fa fa-check"></i><b>5.3</b> Filter - choosing rows</a><ul>
<li class="chapter" data-level="5.3.1" data-path="031-select-filter.html"><a href="031-select-filter.html#one-filter"><i class="fa fa-check"></i><b>5.3.1</b> One filter</a></li>
<li class="chapter" data-level="5.3.2" data-path="031-select-filter.html"><a href="031-select-filter.html#a-compound-filter"><i class="fa fa-check"></i><b>5.3.2</b> A compound filter</a></li>
<li class="chapter" data-level="5.3.3" data-path="031-select-filter.html"><a href="031-select-filter.html#even-more-compound-filters"><i class="fa fa-check"></i><b>5.3.3</b> Even more compound filters</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="031-select-filter.html"><a href="031-select-filter.html#arrange---change-the-order"><i class="fa fa-check"></i><b>5.4</b> Arrange - change the order</a></li>
<li class="chapter" data-level="5.5" data-path="031-select-filter.html"><a href="031-select-filter.html#traps"><i class="fa fa-check"></i><b>5.5</b> Traps</a></li>
<li class="chapter" data-level="5.6" data-path="031-select-filter.html"><a href="031-select-filter.html#resources-1"><i class="fa fa-check"></i><b>5.6</b> Resources</a><ul>
<li class="chapter" data-level="5.6.1" data-path="031-select-filter.html"><a href="031-select-filter.html#tutorials"><i class="fa fa-check"></i><b>5.6.1</b> Tutorials</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="A02-programming.html"><a href="A02-programming.html"><i class="fa fa-check"></i><b>A</b> A gentle intro to programming</a><ul>
<li class="chapter" data-level="A.1" data-path="A02-programming.html"><a href="A02-programming.html#key-takeaways-5"><i class="fa fa-check"></i><b>A.1</b> Key takeaways</a></li>
<li class="chapter" data-level="A.2" data-path="A02-programming.html"><a href="A02-programming.html#building-blocks"><i class="fa fa-check"></i><b>A.2</b> Building blocks</a><ul>
<li class="chapter" data-level="" data-path="A02-programming.html"><a href="A02-programming.html#variables-and-objects"><i class="fa fa-check"></i>Variables and objects</a></li>
<li class="chapter" data-level="" data-path="A02-programming.html"><a href="A02-programming.html#operators-assignment"><i class="fa fa-check"></i>Operators &amp; assignment</a></li>
<li class="chapter" data-level="" data-path="A02-programming.html"><a href="A02-programming.html#functions"><i class="fa fa-check"></i>Functions</a></li>
<li class="chapter" data-level="" data-path="A02-programming.html"><a href="A02-programming.html#loops"><i class="fa fa-check"></i>Loops</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="A02-programming.html"><a href="A02-programming.html#make-an-omelet-with-a-function"><i class="fa fa-check"></i><b>A.3</b> Make an omelet with a function</a><ul>
<li class="chapter" data-level="" data-path="A02-programming.html"><a href="A02-programming.html#open-a-restaurant-with-loops"><i class="fa fa-check"></i>Open a restaurant with loops</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="A02-programming.html"><a href="A02-programming.html#applications"><i class="fa fa-check"></i><b>A.4</b> Applications</a></li>
<li class="chapter" data-level="A.5" data-path="A02-programming.html"><a href="A02-programming.html#more-resources"><i class="fa fa-check"></i><b>A.5</b> More resources</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="A01-resources.html"><a href="A01-resources.html"><i class="fa fa-check"></i><b>B</b> Great R Resources</a><ul>
<li class="chapter" data-level="B.1" data-path="A01-resources.html"><a href="A01-resources.html#key-takeaways-6"><i class="fa fa-check"></i><b>B.1</b> Key takeaways</a></li>
<li class="chapter" data-level="B.2" data-path="A01-resources.html"><a href="A01-resources.html#coursework-in-r"><i class="fa fa-check"></i><b>B.2</b> Coursework in R</a></li>
<li class="chapter" data-level="B.3" data-path="A01-resources.html"><a href="A01-resources.html#instructional-screencasts-and-videos"><i class="fa fa-check"></i><b>B.3</b> Instructional screencasts and videos</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Study Guide for Cronkite School of Journalism</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-frames-and-the-tidyverse" class="section level1">
<h1><span class="header-section-number">3</span> Data frames and the tidyverse</h1>
<div id="key-takeaways-2" class="section level2">
<h2><span class="header-section-number">3.1</span> Key takeaways</h2>
<ul>
<li>Loading the tidyverse</li>
<li>Reading data from from Excel or from a text file.</li>
<li>Looking at your data</li>
<li>Introducing the “pipe” (%&gt;%) and a verb</li>
</ul>
<p>But first….</p>
<p><img src="images/22-take-a-break.jpg" /></p>
</div>
<div id="getting-started" class="section level2">
<h2><span class="header-section-number">3.2</span> Getting started</h2>
<p>Every time you start up R, you will need to load any packages you intend to use. That’s usually the first code chunk in your R Markdown document. If you put all of the libraries you need there, anyone you share with will know which ones have to be installed in the future. Here’s how I start up a new project with a new document:</p>
<p><img src="images/22-load-library.gif" /></p>
<p>I usually add “message=FALSE” to the r in the brackets to prevent a whole bunch of largely meaningless but scary messages. If there’s a real problem, R will still let me know:</p>
<p><img src="images/21-tidyverse-messageoff.png" /></p>
<p>(From now on, you’ll only see the code in between the three backtics. They’re invisible in the output.)</p>
</div>
<div id="the-data-frame" class="section level2">
<h2><span class="header-section-number">3.3</span> The data frame</h2>
<p>A data frame is an R “object”, and is treated like any other variable. The difference is that it contains columns and rows, just like a spreadsheet.</p>
<p>The best data frames follow the same <a href="https://cronkitedata.github.io/cronkite-docs/excel/xlguides/xl-tidydata.html">tidy data</a> principles that we went over in Excel:</p>
<ul>
<li>Each column contains one kind of information – race, sex, address, etc.</li>
<li>Each row contains one example of each of those columns, all at the same unit of analysis.</li>
<li>Each data frame contains different levels or types of information.</li>
</ul>
<div id="loading-and-looking-at-data" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Loading and looking at data</h3>
<p>Much of the data you use in R starts out as a CSV text file or one of its cousins. (See the <a href="https://cronkitedata.github.io/cronkite-docs/general/05-file-formats.html">file format tutorial</a> if you don’t remember what that is.)</p>
<p>Generally, R will guess what <em>type</em> of column each one is – number, text or date. (See the <a href="https://cronkitedata.github.io/cronkite-docs/excel/xl-tidy-data">data types tutorial</a> if you forgot what that means.) There are ways to override its guess, but it’s often right.</p>
<p>The following code chunk:</p>
<ol style="list-style-type: decimal">
<li>Creates a <em>variable</em> to store the long address. That makes it easier to troubleshoot or change later on.<br />
</li>
<li>Asks the tidyverse to execute the function <em>read_csv</em> on the stored link address. The function can read files stored on the web or on your computer.</li>
</ol>
<p>This data is from the Phoenix open government site, and contains staff salaries as of 2018</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co">#the location on the Web for the data set&#39;s csv download</span></a>
<a class="sourceLine" id="cb7-2" title="2">my_link &lt;-<span class="st"> &quot;https://www.phoenixopendata.com/dataset/0c02bbfd-08d9-41e9-a00c-97848a9f7350/resource/3a5c2950-88e3-4cb4-b436-c78d2a266c75/download/open-data-staff-salaries-as-of-12-31-2018.csv&quot;</span></a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4"></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">#use it in a read_csv command</span></a>
<a class="sourceLine" id="cb7-6" title="6">phx_salaries &lt;-<span class="st"> </span><span class="kw">read_csv</span>( my_link  )</a></code></pre></div>
<p>When you run this code, you’ll rececive a scary looking message. Don’t worry - it’s just giving you some information about what it found in the online file:</p>
<div class="figure">
<img src="images/21-rdataframe-parse-message.png" alt="Parsing message from import" />
<p class="caption">Parsing message from import</p>
</div>
<p>Notice that the column names are set automatically using the first name of the file. One of the first things you’ll often want to do with a csv file is change the names using a standard style. I usually prefer lower case names with underscores between words. If I always use those, I won’t have to remember which.</p>
<p>The <code>read_csv</code> command, or function, is part of the tidyverse. The import functions you’ll use the most are:</p>
<pre><code>read_csv()
read_excel()
read_delimited()</code></pre>
<p>They all work pretty much the same way on slightly different types of data files.</p>
</div>
<div id="examine-your-data" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Examine your data</h3>
<p>You should now see the name of the data frame in your Global Environment. Click on it to View it, or issue the <code>View(phx_salaries)</code> command.</p>
<p><img src="images/23-view-salaries.jpg" /></p>
<p>You can look at your data by clicking on its name in the “Global Environment” window, or by using some standard functions in R to explore them. Use the head() function to look at the top and the tail() function to look at the bottom:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">head</span>(phx_salaries)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">LAST_NAME</th>
<th align="left">FIRST_NAME</th>
<th align="left">DESCR</th>
<th align="right">ANNUAL RATE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Aamodt</td>
<td align="left">Gail</td>
<td align="left">Police Officer</td>
<td align="right">72425.60</td>
</tr>
<tr class="even">
<td align="left">Abbitt</td>
<td align="left">Ryan</td>
<td align="left">Firefighter 56hr</td>
<td align="right">67974.82</td>
</tr>
<tr class="odd">
<td align="left">Abbott</td>
<td align="left">Christie</td>
<td align="left">Forensic Scientist IV</td>
<td align="right">99195.20</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">tail</span>(phx_salaries)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">LAST_NAME</th>
<th align="left">FIRST_NAME</th>
<th align="left">DESCR</th>
<th align="right">ANNUAL RATE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">de la Fuente</td>
<td align="left">Mariana</td>
<td align="left">Curriculum/Trng Coord*Supv Dev</td>
<td align="right">77334.4</td>
</tr>
<tr class="even">
<td align="left">de los Rios Jr</td>
<td align="left">Ruben</td>
<td align="left">Police Officer</td>
<td align="right">54475.2</td>
</tr>
<tr class="odd">
<td align="left">von Kampen</td>
<td align="left">Michele</td>
<td align="left">Caseworker II</td>
<td align="right">57283.2</td>
</tr>
</tbody>
</table>
<p>.. and use the “structure” command to see the variable names and types.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">str</span>(phx_salaries)</a></code></pre></div>
<pre><code>## Classes &#39;spec_tbl_df&#39;, &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;: 11956 obs. of  4 variables:
##  $ LAST_NAME  : chr  &quot;Aamodt&quot; &quot;Abbitt&quot; &quot;Abbott&quot; &quot;Abdellatif&quot; ...
##  $ FIRST_NAME : chr  &quot;Gail&quot; &quot;Ryan&quot; &quot;Christie&quot; &quot;Tariq&quot; ...
##  $ DESCR      : chr  &quot;Police Officer&quot; &quot;Firefighter 56hr&quot; &quot;Forensic Scientist IV&quot; &quot;Environmental Quality Spec&quot; ...
##  $ ANNUAL RATE: num  72426 67975 99195 73653 35714 ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   LAST_NAME = col_character(),
##   ..   FIRST_NAME = col_character(),
##   ..   DESCR = col_character(),
##   ..   `ANNUAL RATE` = col_double()
##   .. )</code></pre>
</div>
</div>
<div id="introducing-the-pipe" class="section level2">
<h2><span class="header-section-number">3.4</span> Introducing the pipe</h2>
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">
This is how I explain the ‘pipe’ to <a href="https://twitter.com/hashtag/rstats?src=hash&amp;ref_src=twsrc%5Etfw">#rstats</a> newbies… <a href="https://t.co/VdAFTLzijy">pic.twitter.com/VdAFTLzijy</a>
</p>
— We are R-Ladies (<span class="citation">@WeAreRLadies</span>) <a href="https://twitter.com/WeAreRLadies/status/1172576445794803713?ref_src=twsrc%5Etfw">September 13, 2019</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>You’ll be seeing a lot of R code that has this format:</p>
<pre><code>  data_set_name %&gt;%
     verb ( nouns ) %&gt;%
     verb ( nouns ) %&gt;%
     etc...</code></pre>
<p>That little symbol, <code>%&gt;%</code> is called the “pipe”. It means “and then…”</p>
<p>Here’s a simple example with a verb called <code>rename</code>. It takes the names of the variables from the first line, AND THEN renames them!</p>
<p>This is something you often have to do because R will assume that the first row of the csv file contains the names of your variables. Using them, though, can be a pain – you have to remember whether they’re upper or lower case, and you have to put back-ticks (`) around any names with spaces or special characters.</p>
<p>Here’s what using the pipe looks like to create a NEW data frame out of the old one with the names changed to lower case with underscores, a common pattern in many computer programs:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">phx_salaries_renamed &lt;-<span class="st">                   </span><span class="co">#create a new data frame out of the next set of commands</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="st">   </span>phx_salaries <span class="op">%&gt;%</span><span class="st">                       </span><span class="co">#start with the original data frame name, AND THEN</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="st">   </span><span class="kw">rename</span> (  <span class="dt">last_name=</span>LAST_NAME,         <span class="co"># A list of new_name = old_name pairs, separated by commas</span></a>
<a class="sourceLine" id="cb14-4" title="4">             <span class="dt">first_name=</span>FIRST_NAME,</a>
<a class="sourceLine" id="cb14-5" title="5">             <span class="dt">job_title =</span> DESCR,</a>
<a class="sourceLine" id="cb14-6" title="6">             <span class="dt">annual_pay =</span> <span class="st">`</span><span class="dt">ANNUAL RATE</span><span class="st">`</span>   <span class="co">#note the crazy back-ticks that you have to type for two-word names</span></a>
<a class="sourceLine" id="cb14-7" title="7">           )                         </a>
<a class="sourceLine" id="cb14-8" title="8"></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="kw">head</span> (phx_salaries_renamed)    <span class="co"># print out the first few rows.</span></a></code></pre></div>
<p>You can leave out any name you don’t want to save. (There are fancier, faster ways to do this, but don’t worry abou that just yet. This is the easiest to remember.) This code chunk results in something that looks like this:</p>
<table>
<thead>
<tr class="header">
<th align="left">last_name</th>
<th align="left">first_name</th>
<th align="left">job_title</th>
<th align="right">annual_pay</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Aamodt</td>
<td align="left">Gail</td>
<td align="left">Police Officer</td>
<td align="right">72425.60</td>
</tr>
<tr class="even">
<td align="left">Abbitt</td>
<td align="left">Ryan</td>
<td align="left">Firefighter 56hr</td>
<td align="right">67974.82</td>
</tr>
<tr class="odd">
<td align="left">Abbott</td>
<td align="left">Christie</td>
<td align="left">Forensic Scientist IV</td>
<td align="right">99195.20</td>
</tr>
</tbody>
</table>
</div>
<div id="take-a-break" class="section level2">
<h2><span class="header-section-number">3.5</span> Take a break</h2>
<p>If you’ve gotten this far, congratulations – you’ve started programming in R.</p>
<p>I’ve skipped a lot of details that don’t matter much right now. You’ll see examples of using options and slightly different commands for the same things as we move along. But the process of</p>
<ol style="list-style-type: decimal">
<li>reading data into R,</li>
<li>taking a quick look at it, and</li>
<li>acting on it to create a new dataset</li>
</ol>
<p>is one you’ll be doing a lot.</p>
<p><img src="images/and-breathe.jpg" /></p>
<div class="credit-line">
<p>Max van den Oetelaar via Unsplash</p>
</div>
</div>
<div id="other-resources-1" class="section level2">
<h2><span class="header-section-number">3.6</span> Other resources</h2>
<p>Take a look at Jesse Lecy’s lesson on “<a href="http://ds4ps.org/dp4ss-textbook/ch-032-learning_r.html">Learning How to Learn</a>” from his data science class at ASU. It will make you feel better, I swear.</p>
<p>Hadley Wickham’s “R for Data Science” <a href="https://r4ds.had.co.nz/data-import.html">chapter on importing data</a> goes into a lot of the options and variants of the read_csv command. RStudio has one of its many <a href="https://resources.rstudio.com/rstudio-cheatsheets/data-import-cheat-sheet">cheat sheets on the read_csv function</a> and its cousins.</p>
<p>Unfortunately, a lot of the other resources we’ve seen don’t use the tidyverse versions of the import commands and they work somewhat differently. I think they’ll just be confusing, since we’re not dealing with the “base R” program.</p>
<div id="on-your-own" class="section level3">
<h3><span class="header-section-number">3.6.1</span> On your own</h3>
<ul>
<li>Start a new project in R.</li>
<li>Download this Excel file into the folder.</li>
<li>Create an R Markdown document and document where you got the file and where it’s stored.</li>
<li>Try importing the file into R using the <code>read_excel</code> function, which works just like <code>read_csv</code>. Take a look at its structure (<code>str</code>), its top (<code>head</code>) and its bottom (<code>tail</code>).</li>
<li>Try creating a NEW data frame from the original and rename a couple of columns.</li>
<li>If you can get past the errors, knit the document and bask in the knowledge that you’ve come a long way. You can be quietly proud.</li>
</ul>
<p>You will likely have some errors to puzzle through if you’ve never programmed anything before. Don’t get discouraged – copy and paste the code from this tutorial, and then adapt it to your needs. Try to read any error messages. Follow the 20-minute rule: If you have been working for 20 minutes <strong>without ANY progress</strong> and are out of ideas or don’t understand what you’re trying to do, step away from the computer. When you come back, if you’re still stuck, get help.</p>

</div>
</div>
</div>



 table {
   font-size: .8em;
 }
</style>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="021-r-markdown.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="030-intro-verbs.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["twitter", "github"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toc_depth": 2
});
});
</script>

</body>

</html>
