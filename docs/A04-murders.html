<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>C Murder Accountability Project exercises | R Study Guide for Cronkite School of Journalism</title>
  <meta name="description" content="A companion book for the Cronkite School’s data journalism class for graduate students. A work in progress." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="C Murder Accountability Project exercises | R Study Guide for Cronkite School of Journalism" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://cronkitedata.github.io/rstudyguide" />
  
  <meta property="og:description" content="A companion book for the Cronkite School’s data journalism class for graduate students. A work in progress." />
  <meta name="github-repo" content="cronkitedata/rstudyguide" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="C Murder Accountability Project exercises | R Study Guide for Cronkite School of Journalism" />
  
  <meta name="twitter:description" content="A companion book for the Cronkite School’s data journalism class for graduate students. A work in progress." />
  

<meta name="author" content="Sarah Cohen, Knight Chair in Journalism" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.io" type="image/x-icon" />
<link rel="prev" href="A01-resources.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.11/datatables.js"></script>
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.19/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="mystyles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Study Guide for Cronkite Students</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#using-the-examples-with-packages"><i class="fa fa-check"></i>Using the examples with packages</a></li>
</ul></li>
<li class="part"><span><b>I Introduction to R for Journalists</b></span></li>
<li class="chapter" data-level="1" data-path="011-r-install.html"><a href="011-r-install.html"><i class="fa fa-check"></i><b>1</b> An R and R Studio tour</a><ul>
<li class="chapter" data-level="1.1" data-path="011-r-install.html"><a href="011-r-install.html#key-takeaways"><i class="fa fa-check"></i><b>1.1</b> Key takeaways</a></li>
<li class="chapter" data-level="1.2" data-path="011-r-install.html"><a href="011-r-install.html#why-program"><i class="fa fa-check"></i><b>1.2</b> Why program?</a></li>
<li class="chapter" data-level="1.3" data-path="011-r-install.html"><a href="011-r-install.html#setting-up-r-and-r-studio"><i class="fa fa-check"></i><b>1.3</b> Setting up R and R Studio</a></li>
<li class="chapter" data-level="1.4" data-path="011-r-install.html"><a href="011-r-install.html#an-r-studio-tour"><i class="fa fa-check"></i><b>1.4</b> An R Studio tour</a><ul>
<li class="chapter" data-level="1.4.1" data-path="011-r-install.html"><a href="011-r-install.html#the-console"><i class="fa fa-check"></i><b>1.4.1</b> The Console</a></li>
<li class="chapter" data-level="1.4.2" data-path="011-r-install.html"><a href="011-r-install.html#work-in-projects"><i class="fa fa-check"></i><b>1.4.2</b> Work in projects</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="011-r-install.html"><a href="011-r-install.html#unlocking-packages"><i class="fa fa-check"></i><b>1.5</b> Unlocking packages</a></li>
<li class="chapter" data-level="1.6" data-path="011-r-install.html"><a href="011-r-install.html#variables"><i class="fa fa-check"></i><b>1.6</b> Variables</a></li>
<li class="chapter" data-level="1.7" data-path="011-r-install.html"><a href="011-r-install.html#resources-and-exercises"><i class="fa fa-check"></i><b>1.7</b> Resources and exercises</a><ul>
<li class="chapter" data-level="1.7.1" data-path="011-r-install.html"><a href="011-r-install.html#googling-for-help"><i class="fa fa-check"></i><b>1.7.1</b> Googling for help</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="021-r-markdown.html"><a href="021-r-markdown.html"><i class="fa fa-check"></i><b>2</b> R Markdown</a><ul>
<li class="chapter" data-level="2.1" data-path="021-r-markdown.html"><a href="021-r-markdown.html#key-takeaways-1"><i class="fa fa-check"></i><b>2.1</b> Key takeaways</a></li>
<li class="chapter" data-level="2.2" data-path="021-r-markdown.html"><a href="021-r-markdown.html#getting-started-with-r-markdown"><i class="fa fa-check"></i><b>2.2</b> Getting started with R Markdown</a></li>
<li class="chapter" data-level="2.3" data-path="021-r-markdown.html"><a href="021-r-markdown.html#the-anatomy-of-a-document"><i class="fa fa-check"></i><b>2.3</b> The anatomy of a document</a></li>
<li class="chapter" data-level="2.4" data-path="021-r-markdown.html"><a href="021-r-markdown.html#knitting-your-document"><i class="fa fa-check"></i><b>2.4</b> Knitting your document</a></li>
<li class="chapter" data-level="2.5" data-path="021-r-markdown.html"><a href="021-r-markdown.html#code-chunks"><i class="fa fa-check"></i><b>2.5</b> Code chunks</a></li>
<li class="chapter" data-level="2.6" data-path="021-r-markdown.html"><a href="021-r-markdown.html#resources-and-exercises-1"><i class="fa fa-check"></i><b>2.6</b> Resources and exercises</a><ul>
<li class="chapter" data-level="" data-path="021-r-markdown.html"><a href="021-r-markdown.html#resources"><i class="fa fa-check"></i>Resources</a></li>
<li class="chapter" data-level="" data-path="021-r-markdown.html"><a href="021-r-markdown.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="021-r-markdown.html"><a href="021-r-markdown.html#bonus-styling-your-r-markdown-documents"><i class="fa fa-check"></i><b>2.7</b> Bonus: Styling your R Markdown documents</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="022-data-frames.html"><a href="022-data-frames.html"><i class="fa fa-check"></i><b>3</b> Data frames and the tidyverse</a><ul>
<li class="chapter" data-level="3.1" data-path="022-data-frames.html"><a href="022-data-frames.html#key-takeaways-2"><i class="fa fa-check"></i><b>3.1</b> Key takeaways</a></li>
<li class="chapter" data-level="3.2" data-path="022-data-frames.html"><a href="022-data-frames.html#getting-started"><i class="fa fa-check"></i><b>3.2</b> Getting started</a></li>
<li class="chapter" data-level="3.3" data-path="022-data-frames.html"><a href="022-data-frames.html#the-data-frame"><i class="fa fa-check"></i><b>3.3</b> The data frame</a><ul>
<li class="chapter" data-level="3.3.1" data-path="022-data-frames.html"><a href="022-data-frames.html#loading-and-looking-at-data"><i class="fa fa-check"></i><b>3.3.1</b> Loading and looking at data</a></li>
<li class="chapter" data-level="3.3.2" data-path="022-data-frames.html"><a href="022-data-frames.html#examine-your-data"><i class="fa fa-check"></i><b>3.3.2</b> Examine your data</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="022-data-frames.html"><a href="022-data-frames.html#introducing-the-pipe"><i class="fa fa-check"></i><b>3.4</b> Introducing the pipe</a></li>
<li class="chapter" data-level="3.5" data-path="022-data-frames.html"><a href="022-data-frames.html#take-a-break"><i class="fa fa-check"></i><b>3.5</b> Take a break</a></li>
<li class="chapter" data-level="3.6" data-path="022-data-frames.html"><a href="022-data-frames.html#other-resources-1"><i class="fa fa-check"></i><b>3.6</b> Other resources</a><ul>
<li class="chapter" data-level="3.6.1" data-path="022-data-frames.html"><a href="022-data-frames.html#on-your-own"><i class="fa fa-check"></i><b>3.6.1</b> On your own</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II The Verbs of the Tidyverse</b></span></li>
<li class="chapter" data-level="4" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html"><i class="fa fa-check"></i><b>4</b> A quick tour of verbs</a><ul>
<li class="chapter" data-level="4.1" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#key-takeaways-3"><i class="fa fa-check"></i><b>4.1</b> Key takeaways</a><ul>
<li class="chapter" data-level="" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#data-for-this-walkthrough"><i class="fa fa-check"></i>Data for this walkthrough</a></li>
<li class="chapter" data-level="4.1.1" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#follow-along"><i class="fa fa-check"></i><b>4.1.1</b> Follow along</a></li>
<li><a href="030-intro-verbs.html#the-operator-and-then">The <code>%&gt;%</code> operator: … and then…</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#looking-at-your-data-in-pieces-and-in-order"><i class="fa fa-check"></i><b>4.2</b> Looking at your data in pieces and in order</a><ul>
<li class="chapter" data-level="4.2.1" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#select-to-pick-out-columns"><i class="fa fa-check"></i><b>4.2.1</b> <code>select</code> to pick out columns</a></li>
<li class="chapter" data-level="4.2.2" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#arrange-to-sort"><i class="fa fa-check"></i><b>4.2.2</b> <code>arrange</code> to sort</a></li>
<li class="chapter" data-level="4.2.3" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#filter-to-pick-out-rows"><i class="fa fa-check"></i><b>4.2.3</b> <code>filter</code> to pick out rows</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#group_by-and-summarise-to-count-and-sum"><i class="fa fa-check"></i><b>4.3</b> <code>group_by</code> and <code>summarise</code> to count and sum</a></li>
<li class="chapter" data-level="4.4" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#mutate-to-calculate-something-new"><i class="fa fa-check"></i><b>4.4</b> <code>mutate</code> to calculate something new</a></li>
<li class="chapter" data-level="4.5" data-path="030-intro-verbs.html"><a href="030-intro-verbs.html#join-to-merge-tables-together-by-column-union-to-add-rows"><i class="fa fa-check"></i><b>4.5</b> <code>join</code> to merge tables together by column; <code>union</code> to add rows</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="031-select-filter.html"><a href="031-select-filter.html"><i class="fa fa-check"></i><b>5</b> Verbs Part 1: Picking and choosing</a><ul>
<li class="chapter" data-level="5.1" data-path="031-select-filter.html"><a href="031-select-filter.html#key-takeaways-4"><i class="fa fa-check"></i><b>5.1</b> Key takeaways</a></li>
<li class="chapter" data-level="5.2" data-path="031-select-filter.html"><a href="031-select-filter.html#select---choosing-columns"><i class="fa fa-check"></i><b>5.2</b> Select - choosing columns</a><ul>
<li class="chapter" data-level="" data-path="031-select-filter.html"><a href="031-select-filter.html#optional-other-ways-to-select"><i class="fa fa-check"></i>Optional: Other ways to select</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="031-select-filter.html"><a href="031-select-filter.html#filter---choosing-rows"><i class="fa fa-check"></i><b>5.3</b> Filter - choosing rows</a><ul>
<li class="chapter" data-level="5.3.1" data-path="031-select-filter.html"><a href="031-select-filter.html#one-filter"><i class="fa fa-check"></i><b>5.3.1</b> One filter</a></li>
<li class="chapter" data-level="5.3.2" data-path="031-select-filter.html"><a href="031-select-filter.html#a-compound-filter"><i class="fa fa-check"></i><b>5.3.2</b> A compound filter</a></li>
<li class="chapter" data-level="5.3.3" data-path="031-select-filter.html"><a href="031-select-filter.html#even-more-compound-filters"><i class="fa fa-check"></i><b>5.3.3</b> Even more compound filters</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="031-select-filter.html"><a href="031-select-filter.html#arrange---change-the-order"><i class="fa fa-check"></i><b>5.4</b> Arrange - change the order</a></li>
<li class="chapter" data-level="5.5" data-path="031-select-filter.html"><a href="031-select-filter.html#traps"><i class="fa fa-check"></i><b>5.5</b> Traps</a></li>
<li class="chapter" data-level="5.6" data-path="031-select-filter.html"><a href="031-select-filter.html#resources-1"><i class="fa fa-check"></i><b>5.6</b> Resources</a><ul>
<li class="chapter" data-level="5.6.1" data-path="031-select-filter.html"><a href="031-select-filter.html#exercises-1"><i class="fa fa-check"></i><b>5.6.1</b> Exercises</a></li>
<li class="chapter" data-level="5.6.2" data-path="031-select-filter.html"><a href="031-select-filter.html#tutorials"><i class="fa fa-check"></i><b>5.6.2</b> Tutorials</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="033-groupby.html"><a href="033-groupby.html"><i class="fa fa-check"></i><b>6</b> Verbs 2: group_by and summarise</a><ul>
<li class="chapter" data-level="6.1" data-path="033-groupby.html"><a href="033-groupby.html#key-takeaways-5"><i class="fa fa-check"></i><b>6.1</b> Key takeaways</a></li>
<li class="chapter" data-level="6.2" data-path="033-groupby.html"><a href="033-groupby.html#group_by-summarise-basics"><i class="fa fa-check"></i><b>6.2</b> group_by / summarise basics</a><ul>
<li class="chapter" data-level="6.2.1" data-path="033-groupby.html"><a href="033-groupby.html#other-summary-functions"><i class="fa fa-check"></i><b>6.2.1</b> Other summary functions</a></li>
<li class="chapter" data-level="6.2.2" data-path="033-groupby.html"><a href="033-groupby.html#grouping-by-more-than-one-variable"><i class="fa fa-check"></i><b>6.2.2</b> Grouping by more than one variable</a></li>
<li class="chapter" data-level="6.2.3" data-path="033-groupby.html"><a href="033-groupby.html#rolling-up-to-the-next-level"><i class="fa fa-check"></i><b>6.2.3</b> Rolling up to the next level</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="033-groupby.html"><a href="033-groupby.html#restructuring-for-a-report-with-pivot_wider"><i class="fa fa-check"></i><b>6.3</b> Restructuring for a report with <code>pivot_wider()</code></a><ul>
<li class="chapter" data-level="6.3.1" data-path="033-groupby.html"><a href="033-groupby.html#a-note-on-restructuring-your-data-frames"><i class="fa fa-check"></i><b>6.3.1</b> A note on restructuring your data frames</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="033-groupby.html"><a href="033-groupby.html#resources-exercises"><i class="fa fa-check"></i><b>6.4</b> Resources &amp; exercises</a><ul>
<li class="chapter" data-level="6.4.1" data-path="033-groupby.html"><a href="033-groupby.html#exercises-2"><i class="fa fa-check"></i><b>6.4.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="035-mutate.html"><a href="035-mutate.html"><i class="fa fa-check"></i><b>7</b> Verbs 3: mutate</a><ul>
<li class="chapter" data-level="7.1" data-path="035-mutate.html"><a href="035-mutate.html#key-takeaways-6"><i class="fa fa-check"></i><b>7.1</b> Key takeaways</a><ul>
<li class="chapter" data-level="7.1.1" data-path="035-mutate.html"><a href="035-mutate.html#read-in-some-data"><i class="fa fa-check"></i><b>7.1.1</b> Read in some data</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="035-mutate.html"><a href="035-mutate.html#simple-arithmetic"><i class="fa fa-check"></i><b>7.2</b> Simple arithmetic</a></li>
<li class="chapter" data-level="7.3" data-path="035-mutate.html"><a href="035-mutate.html#creating-categories"><i class="fa fa-check"></i><b>7.3</b> Creating categories</a></li>
<li class="chapter" data-level="7.4" data-path="035-mutate.html"><a href="035-mutate.html#bonus-fun-with-date-and-time"><i class="fa fa-check"></i><b>7.4</b> Bonus: Fun with date and time</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="A02-programming.html"><a href="A02-programming.html"><i class="fa fa-check"></i><b>A</b> A gentle intro to programming</a><ul>
<li class="chapter" data-level="A.1" data-path="A02-programming.html"><a href="A02-programming.html#key-takeaways-7"><i class="fa fa-check"></i><b>A.1</b> Key takeaways</a></li>
<li class="chapter" data-level="A.2" data-path="A02-programming.html"><a href="A02-programming.html#building-blocks"><i class="fa fa-check"></i><b>A.2</b> Building blocks</a><ul>
<li class="chapter" data-level="" data-path="A02-programming.html"><a href="A02-programming.html#variables-and-objects"><i class="fa fa-check"></i>Variables and objects</a></li>
<li class="chapter" data-level="" data-path="A02-programming.html"><a href="A02-programming.html#operators-assignment"><i class="fa fa-check"></i>Operators &amp; assignment</a></li>
<li class="chapter" data-level="" data-path="A02-programming.html"><a href="A02-programming.html#functions"><i class="fa fa-check"></i>Functions</a></li>
<li class="chapter" data-level="" data-path="A02-programming.html"><a href="A02-programming.html#loops"><i class="fa fa-check"></i>Loops</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="A02-programming.html"><a href="A02-programming.html#make-an-omelet-with-a-function"><i class="fa fa-check"></i><b>A.3</b> Make an omelet with a function</a><ul>
<li class="chapter" data-level="" data-path="A02-programming.html"><a href="A02-programming.html#open-a-restaurant-with-loops"><i class="fa fa-check"></i>Open a restaurant with loops</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="A02-programming.html"><a href="A02-programming.html#applications"><i class="fa fa-check"></i><b>A.4</b> Applications</a></li>
<li class="chapter" data-level="A.5" data-path="A02-programming.html"><a href="A02-programming.html#more-resources"><i class="fa fa-check"></i><b>A.5</b> More resources</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="A01-resources.html"><a href="A01-resources.html"><i class="fa fa-check"></i><b>B</b> Great R Resources</a><ul>
<li class="chapter" data-level="B.1" data-path="A01-resources.html"><a href="A01-resources.html#key-takeaways-8"><i class="fa fa-check"></i><b>B.1</b> Key takeaways</a></li>
<li class="chapter" data-level="B.2" data-path="A01-resources.html"><a href="A01-resources.html#coursework-in-r"><i class="fa fa-check"></i><b>B.2</b> Coursework in R</a></li>
<li class="chapter" data-level="B.3" data-path="A01-resources.html"><a href="A01-resources.html#instructional-screencasts-and-videos"><i class="fa fa-check"></i><b>B.3</b> Instructional screencasts and videos</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="A04-murders.html"><a href="A04-murders.html"><i class="fa fa-check"></i><b>C</b> Murder Accountability Project exercises</a><ul>
<li class="chapter" data-level="C.1" data-path="A04-murders.html"><a href="A04-murders.html#the-data"><i class="fa fa-check"></i><b>C.1</b> The data</a></li>
<li class="chapter" data-level="C.2" data-path="A04-murders.html"><a href="A04-murders.html#exercises-by-chapter"><i class="fa fa-check"></i><b>C.2</b> Exercises by chapter</a><ul>
<li class="chapter" data-level="C.2.1" data-path="A04-murders.html"><a href="A04-murders.html#select-and-filter-exercises"><i class="fa fa-check"></i><b>C.2.1</b> Select and filter exercises</a></li>
<li class="chapter" data-level="C.2.2" data-path="A04-murders.html"><a href="A04-murders.html#group-by-and-summarise"><i class="fa fa-check"></i><b>C.2.2</b> Group by and summarise</a></li>
</ul></li>
<li class="chapter" data-level="C.3" data-path="A04-murders.html"><a href="A04-murders.html#answers-to-exercises"><i class="fa fa-check"></i><b>C.3</b> Answers to exercises</a><ul>
<li class="chapter" data-level="C.3.1" data-path="A04-murders.html"><a href="A04-murders.html#select-and-filter"><i class="fa fa-check"></i><b>C.3.1</b> Select and filter</a></li>
<li class="chapter" data-level="C.3.2" data-path="A04-murders.html"><a href="A04-murders.html#group-by"><i class="fa fa-check"></i><b>C.3.2</b> Group by</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Study Guide for Cronkite School of Journalism</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="murder-accountability-project-exercises" class="section level1">
<h1><span class="header-section-number">C</span> Murder Accountability Project exercises</h1>
<style>
   table {
      font-size:.8em;
   }
</style>
<p>The Murder Accountability Project was profiled in the <a href="https://www.newyorker.com/magazine/2017/11/27/the-serial-killer-detector">New Yorker in November, 2017</a>. Andrew B Tran brilliantly decided to use its data as a vehicle for learning R in his <a href="https://learn.r-journalism.com/en/">R for Journalists’ online class</a>. This set of tutorials adapts his exercises for people using this textbook. You should consider taking his entire free full course if you want to get more detail.</p>
<p><a href="https://github.com/cronkitedata/rstudyguide/blob/master/data/murder_data.Rda">Download the data</a> into a new or existing R project, then load it using the <code>load(file="murder_data.Rda")</code> command in a code chunk.</p>
<div id="the-data" class="section level2">
<h2><span class="header-section-number">C.1</span> The data</h2>
<p>This R dataset was created by subsetting only mountain states and Oregon and Washington from the national dataset, and converting the codes used in the original SPSS data into codes and their labels in separate variables. The data runs from 1976 through 2018. Here are the fields included:</p>
<pre><code>## Observations: 56,075
## Variables: 37
## $ rowid             &lt;int&gt; 27475, 27476, 27477, 27478, 27479, 27480, 27481, 27482, 27483, 27484, 27485, 27486, 27487…
## $ mapid             &lt;chr&gt; &quot;197612001AZ00100&quot;, &quot;197708001AZ00100&quot;, &quot;197801001AZ00100&quot;, &quot;198207001AZ00100&quot;, &quot;19850600…
## $ year              &lt;dbl&gt; 1976, 1977, 1978, 1982, 1985, 1988, 1989, 1990, 1990, 1991, 1992, 1995, 1995, 1996, 2003,…
## $ month             &lt;dbl&gt; 12, 8, 1, 7, 6, 11, 10, 9, 12, 2, 12, 3, 9, 4, 2, 8, 9, 8, 9, 7, 7, 5, 3, 8, 7, 10, 6, 9,…
## $ fip               &lt;chr&gt; &quot;04001&quot;, &quot;04001&quot;, &quot;04001&quot;, &quot;04001&quot;, &quot;04001&quot;, &quot;04001&quot;, &quot;04001&quot;, &quot;04001&quot;, &quot;04001&quot;, &quot;04001&quot;,…
## $ state_fip         &lt;chr&gt; &quot;04&quot;, &quot;04&quot;, &quot;04&quot;, &quot;04&quot;, &quot;04&quot;, &quot;04&quot;, &quot;04&quot;, &quot;04&quot;, &quot;04&quot;, &quot;04&quot;, &quot;04&quot;, &quot;04&quot;, &quot;04&quot;, &quot;04&quot;, &quot;04&quot;,…
## $ cnty_name         &lt;chr&gt; &quot;Apache, AZ&quot;, &quot;Apache, AZ&quot;, &quot;Apache, AZ&quot;, &quot;Apache, AZ&quot;, &quot;Apache, AZ&quot;, &quot;Apache, AZ&quot;, &quot;Apac…
## $ msa_code          &lt;chr&gt; &quot;99904&quot;, &quot;99904&quot;, &quot;99904&quot;, &quot;99904&quot;, &quot;99904&quot;, &quot;99904&quot;, &quot;99904&quot;, &quot;99904&quot;, &quot;99904&quot;, &quot;99904&quot;,…
## $ msa_name          &lt;chr&gt; &quot;Rural Arizona&quot;, &quot;Rural Arizona&quot;, &quot;Rural Arizona&quot;, &quot;Rural Arizona&quot;, &quot;Rural Arizona&quot;, &quot;Rur…
## $ state_abbr        &lt;chr&gt; &quot;AZ&quot;, &quot;AZ&quot;, &quot;AZ&quot;, &quot;AZ&quot;, &quot;AZ&quot;, &quot;AZ&quot;, &quot;AZ&quot;, &quot;AZ&quot;, &quot;AZ&quot;, &quot;AZ&quot;, &quot;AZ&quot;, &quot;AZ&quot;, &quot;AZ&quot;, &quot;AZ&quot;, &quot;AZ&quot;,…
## $ ori               &lt;chr&gt; &quot;AZ00100&quot;, &quot;AZ00100&quot;, &quot;AZ00100&quot;, &quot;AZ00100&quot;, &quot;AZ00100&quot;, &quot;AZ00100&quot;, &quot;AZ00100&quot;, &quot;AZ00100&quot;, &quot;…
## $ agency            &lt;chr&gt; &quot;Apache County&quot;, &quot;Apache County&quot;, &quot;Apache County&quot;, &quot;Apache County&quot;, &quot;Apache County&quot;, &quot;Apa…
## $ agency_type       &lt;chr&gt; &quot;Sheriff&quot;, &quot;Sheriff&quot;, &quot;Sheriff&quot;, &quot;Sheriff&quot;, &quot;Sheriff&quot;, &quot;Sheriff&quot;, &quot;Sheriff&quot;, &quot;Sheriff&quot;, &quot;…
## $ solved            &lt;chr&gt; &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;…
## $ homicide_type     &lt;chr&gt; &quot;Murder and non-negligent manslaughter&quot;, &quot;Murder and non-negligent manslaughter&quot;, &quot;Mansla…
## $ incident_num      &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
## $ vic_age           &lt;dbl&gt; 42, 28, 0, 23, 18, 23, 43, 33, 33, 0, 38, 0, 37, 25, 60, 17, 60, 24, 35, 80, 74, 13, 3, 5…
## $ vic_sex           &lt;chr&gt; &quot;Male&quot;, &quot;Male&quot;, &quot;Female&quot;, &quot;Female&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Female&quot;, &quot;Ma…
## $ vic_race_code     &lt;chr&gt; &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;,…
## $ vic_race          &lt;chr&gt; &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;,…
## $ vic_ethnic_code   &lt;chr&gt; &quot;U&quot;, &quot;U&quot;, &quot;U&quot;, &quot;N&quot;, &quot;U&quot;, &quot;U&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;H&quot;, &quot;N&quot;, &quot;N&quot;,…
## $ vic_ethnic        &lt;chr&gt; &quot;Unknown or not reported&quot;, &quot;Unknown or not reported&quot;, &quot;Unknown or not reported&quot;, &quot;Not of …
## $ off_age           &lt;dbl&gt; 22, 44, 50, 999, 999, 41, 39, 48, 999, 29, 18, 14, 23, 63, 45, 21, 21, 23, 29, 51, 51, 12…
## $ off_sex           &lt;chr&gt; &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Unknown&quot;, &quot;Unknown&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Unknown&quot;, &quot;Male&quot;, …
## $ off_race_code     &lt;chr&gt; &quot;I&quot;, &quot;W&quot;, &quot;W&quot;, &quot;U&quot;, &quot;U&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;U&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;, &quot;W&quot;,…
## $ off_race          &lt;chr&gt; &quot;American Indian or Alaskan Native&quot;, &quot;White&quot;, &quot;White&quot;, &quot;Unknown&quot;, &quot;Unknown&quot;, &quot;White&quot;, &quot;Wh…
## $ off_ethnic_code   &lt;chr&gt; &quot;U&quot;, &quot;U&quot;, &quot;U&quot;, &quot;U&quot;, &quot;U&quot;, &quot;U&quot;, &quot;N&quot;, &quot;N&quot;, &quot;U&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;,…
## $ off_ethnic        &lt;chr&gt; &quot;Unknown or not reported&quot;, &quot;Unknown or not reported&quot;, &quot;Unknown or not reported&quot;, &quot;Unknown…
## $ situation_code    &lt;chr&gt; &quot;C&quot;, &quot;A&quot;, &quot;C&quot;, &quot;B&quot;, &quot;B&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;B&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;,…
## $ situation         &lt;chr&gt; &quot;Single victim/multiple offenders&quot;, &quot;Single victim/single offender&quot;, &quot;Single victim/multi…
## $ weapon_code       &lt;chr&gt; &quot;20&quot;, &quot;13&quot;, &quot;90&quot;, &quot;11&quot;, &quot;12&quot;, &quot;12&quot;, &quot;12&quot;, &quot;12&quot;, &quot;12&quot;, &quot;40&quot;, &quot;12&quot;, &quot;40&quot;, &quot;14&quot;, &quot;12&quot;, &quot;14&quot;,…
## $ weapon            &lt;chr&gt; &quot;Knife or cutting instrument&quot;, &quot;Rifle&quot;, &quot;Other or type unknown&quot;, &quot;Firearm, type not state…
## $ relationship_code &lt;chr&gt; &quot;AQ&quot;, &quot;AQ&quot;, &quot;DA&quot;, &quot;UN&quot;, &quot;UN&quot;, &quot;AQ&quot;, &quot;AQ&quot;, &quot;AQ&quot;, &quot;ST&quot;, &quot;DA&quot;, &quot;AQ&quot;, &quot;SO&quot;, &quot;OK&quot;, &quot;AQ&quot;, &quot;AQ&quot;,…
## $ relationship      &lt;chr&gt; &quot;Acquaintance&quot;, &quot;Acquaintance&quot;, &quot;Daughter&quot;, &quot;Relationship not determined&quot;, &quot;Relationship …
## $ circumstance_code &lt;chr&gt; &quot;42&quot;, &quot;44&quot;, &quot;59&quot;, &quot;99&quot;, &quot;99&quot;, &quot;45&quot;, &quot;5&quot;, &quot;60&quot;, &quot;3&quot;, &quot;59&quot;, &quot;60&quot;, &quot;60&quot;, &quot;45&quot;, &quot;40&quot;, &quot;60&quot;, &quot;…
## $ circumstance      &lt;chr&gt; &quot;Brawl due to influence of alcohol&quot;, &quot;Argument over money or property&quot;, &quot;All other mansla…
## $ use_date          &lt;date&gt; 1980-03-01, 1980-03-01, 1980-03-01, 1982-10-06, 1985-08-21, 1989-03-15, 1990-02-06, 1991…</code></pre>
<p>Any variable that begins with <code>off</code> refers to the offender; any variable that begins with <code>vic</code> refers to the victim. Most variables are pretty self-explanatory, but here are a few details:</p>
<ul>
<li><code>fip</code> and <code>state_fip</code> are standard codes used across many databases to identify geographic areas – in this case, counties and states.</li>
<li><code>msa_code</code> and <code>msa_name</code> refer to Metropolitan Statistical Areas, which combine nearby counties regardless of state into areas that are often considered on large metropolitan area, such as Washington DC and the Virginia and Maryland suburbs.</li>
<li><code>ori</code>, <code>agency</code> and <code>agency_type</code> refer to the law enforcement agency – police or sheriff’s office – that investigated the murder. An ORI is a standard code for each agency from the FBI.</li>
<li><code>relationship_code</code> and <code>relationship</code> can be confusing. They refer to the relationship of the victim to the offender, not the other way around. For example, “Wife” means that the victim was the killer’s wife, not that the killer was the victim’s wife. This is unclear in the FBI documentation.</li>
</ul>
<p>More details are available in <a href="https://www.dropbox.com/s/lo6tgo8nnbpqeru/MAPdefinitionsSHR.pdf?dl=1">this detailed record layout and data dictionary</a>.</p>
</div>
<div id="exercises-by-chapter" class="section level2">
<h2><span class="header-section-number">C.2</span> Exercises by chapter</h2>
<div id="select-and-filter-exercises" class="section level3">
<h3><span class="header-section-number">C.2.1</span> Select and filter exercises</h3>
<p>Here are some suggested exercises to practice what you learned in Chapter 5, Select and Filter:</p>
<div id="older-wives-as-victims-in-arizona" class="section level4 unnumbered">
<h4>Older wives as victims in Arizona</h4>
<ol style="list-style-type: decimal">
<li>Create a new data frame called <code>arizona_murders</code> based on just the murders that were reported in that state.</li>
</ol>
<p>Try doing these one step at a time by adding to a query :</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Pick out just following variables to work with:</p>
<ul>
<li>year</li>
<li>name of the county and the police department,</li>
<li>whether it was solved,</li>
<li>demographics (eg, age, race, sex, ethnicity) of the victim and the offender,</li>
<li>information on the weapon and the relationship</li>
</ul></li>
<li><p>List all of the murders in which the killer was the husband of the victim. This can be done using either the relationship or the relationship_code.</p></li>
<li><p>Add a condition that the wives were at least 60 years old.</p></li>
<li><p>Sort the answer by oldest to youngest</p></li>
</ol>
</div>
<div id="gun-related-killings" class="section level4 unnumbered">
<h4>Gun-related killings</h4>
<p>Finding out what codes are in the data could be done with a <code>group_by</code>/<code>summarise</code> query, but there is another verb that can show you every <strong>unique</strong> value in a dataset. Use this code to show you every type of weapon used in the dataset:</p>
<pre><code>    murder_data %&gt;%
       distinct (weapon_code, weapon) %&gt;%
       arrange (weapon_code)</code></pre>
<p>The verb <code>distinct</code> is used instead of <code>select</code> to just show a list of values that are never repeated. When you run that code, you can see why it’s sometimes useful to keep codes as well as words in a dataset – codes “11” through “15” refer to some kind of gun.</p>
<p>**Q: Find all gun-related murders of young black or Hispanic men since 2015.
You can define “young” however you want, but in my example I’ll use victims between 15 and 29.</p>
<p>In this example, you’ll have to combine OR conditions, with others. Remember you can use BETWEEN for ranges of values or %in% for a list of values.</p>
</div>
<div id="advanced-exercises-using-other-conditions" class="section level4 unnumbered">
<h4>Advanced exercises using other conditions</h4>
<p>If you’re feeling adventurous, try figuring out how you might find:</p>
<ul>
<li><p>Any domestic-violence related incidents. Hint: This would be an <code>%in%</code> condition once you look at your options using either “distinct” or a group-by query.</p></li>
<li><p>Try using <code>str_detect</code> when you want to use wild cards instead of exact matches. These take regular expressions as arguments. So to find any gun in this dataset, you’d use</p>
<pre><code>str_detect(weapon_code, &quot;^1&quot;)</code></pre></li>
</ul>
<p>(For more details on regular expressions, try the <a href="https://cronkitedata.github.io/cronkite-docs/special/regex-beginning.html">Regex101 tutorial</a> on our class website. Using regular expressions is often a way to make queries shorter and less fussy, but they are not as clear to a reader – they often take some puzzling through.)</p>
</div>
</div>
<div id="group-by-and-summarise" class="section level3">
<h3><span class="header-section-number">C.2.2</span> Group by and summarise</h3>
<p>The group by exercises are just like a pivot table. In fact, to turn it on its head, you use the command “pivot_wider”</p>
<div id="the-most" class="section level4 unnumbered">
<h4>“The most”</h4>
<ul>
<li><p>Which county in this small dataset has the most murders? Which one has the most police killings? (Look in the circumstance column for this.)</p></li>
<li><p>Create a table showing the number of murders by year and state (with states across the top, and years down the side). This is a group_by / summarise / arrange / pivot_wider exercise</p></li>
<li><p>Try calculating the percent of murders by relationship. For this to work, you can only keep one group_by column (relationship)</p></li>
</ul>
</div>
<div id="putting-it-all-together" class="section level4 unnumbered">
<h4>Putting it all together</h4>
<p>What percent of each state’s domestic violence victims are of Hispanic origin?</p>
</div>
<div id="bonus-mutate-with-group_by" class="section level4 unnumbered">
<h4>Bonus: Mutate with group_by</h4>
<p>Chapter 7, Mutate, has an example of creating a new category out of an old one. Try to puzzle through how to find the county that has the highest rate of gun murders vs. other weapons. This involves three steps: creating a new category of Yes/No out of the weapon; grouping and counting; then rolling up to the next level.</p>
</div>
</div>
</div>
<div id="answers-to-exercises" class="section level2">
<h2><span class="header-section-number">C.3</span> Answers to exercises</h2>
<div id="select-and-filter" class="section level3">
<h3><span class="header-section-number">C.3.1</span> Select and filter</h3>
<div id="arizona-wives" class="section level4 unnumbered">
<h4>Arizona wives</h4>
<ol style="list-style-type: decimal">
<li>Create a new dataset with just arizona:</li>
</ol>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" title="1">arizona_murders &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb70-2" title="2"><span class="st">  </span>murder_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb70-3" title="3"><span class="st">  </span><span class="kw">filter</span> ( state_abbr <span class="op">==</span><span class="st"> &quot;AZ&quot;</span>)</a></code></pre></div>
<p>You should have 15,443 rows in this dataset.</p>
<ol start="2" style="list-style-type: decimal">
<li>The final set of queries might look like this. (You might have noticed you that you had one victim age 999 when you sorted. That means “unknown” in this dataset, so you’ll want to filter that out as well.)</li>
</ol>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" title="1">arizona_murders  <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb71-2" title="2"><span class="st">  </span><span class="kw">select</span> ( year, cnty_name, agency, solved, </a>
<a class="sourceLine" id="cb71-3" title="3">           <span class="kw">starts_with</span>(<span class="st">&quot;vic&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;off&quot;</span>), </a>
<a class="sourceLine" id="cb71-4" title="4">           <span class="kw">contains</span> (<span class="st">&quot;relationship&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb71-5" title="5"><span class="st">  </span><span class="kw">filter</span> (relationship <span class="op">==</span><span class="st"> &quot;Wife&quot;</span>  <span class="op">&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb71-6" title="6"><span class="st">          </span>vic_age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">60</span> <span class="op">&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb71-7" title="7"><span class="st">          </span>vic_age <span class="op">&lt;</span><span class="st"> </span><span class="dv">999</span> )  <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb71-8" title="8"><span class="st">  </span><span class="kw">arrange</span> ( <span class="kw">desc</span>(vic_age)) </a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["year"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["cnty_name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["agency"],"name":[3],"type":["chr"],"align":["left"]},{"label":["solved"],"name":[4],"type":["chr"],"align":["left"]},{"label":["vic_age"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["vic_sex"],"name":[6],"type":["chr"],"align":["left"]},{"label":["vic_race_code"],"name":[7],"type":["chr"],"align":["left"]},{"label":["vic_race"],"name":[8],"type":["chr"],"align":["left"]},{"label":["vic_ethnic_code"],"name":[9],"type":["chr"],"align":["left"]},{"label":["vic_ethnic"],"name":[10],"type":["chr"],"align":["left"]},{"label":["off_age"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["off_sex"],"name":[12],"type":["chr"],"align":["left"]},{"label":["off_race_code"],"name":[13],"type":["chr"],"align":["left"]},{"label":["off_race"],"name":[14],"type":["chr"],"align":["left"]},{"label":["off_ethnic_code"],"name":[15],"type":["chr"],"align":["left"]},{"label":["off_ethnic"],"name":[16],"type":["chr"],"align":["left"]},{"label":["relationship_code"],"name":[17],"type":["chr"],"align":["left"]},{"label":["relationship"],"name":[18],"type":["chr"],"align":["left"]}],"data":[{"1":"2006","2":"Maricopa, AZ","3":"Scottsdale","4":"Yes","5":"95","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"88","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2018","2":"Coconino, AZ","3":"Coconino County","4":"Yes","5":"94","6":"Male","7":"W","8":"White","9":"H","10":"Hispanic origin","11":"70","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1996","2":"Maricopa, AZ","3":"Mesa","4":"Yes","5":"90","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"92","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2008","2":"Maricopa, AZ","3":"Mesa","4":"Yes","5":"89","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"86","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2017","2":"Pima, AZ","3":"Pima County","4":"Yes","5":"88","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"89","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1987","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"87","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"88","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"2013","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"87","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"87","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"2013","2":"Maricopa, AZ","3":"Glendale","4":"Yes","5":"86","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"86","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2016","2":"Maricopa, AZ","3":"Mesa","4":"Yes","5":"85","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"85","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2008","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"85","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"89","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1986","2":"Pima, AZ","3":"Tucson","4":"Yes","5":"85","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"90","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2012","2":"Yavapai, AZ","3":"Prescott","4":"Yes","5":"85","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"88","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1980","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"84","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"77","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2016","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"84","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"87","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2005","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"84","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"85","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1992","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"83","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"83","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1998","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"83","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"81","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1994","2":"Mohave, AZ","3":"Lake Havasu City","4":"Yes","5":"83","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"83","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2012","2":"Pinal, AZ","3":"Pinal County","4":"Yes","5":"83","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"81","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1999","2":"Maricopa, AZ","3":"Glendale","4":"Yes","5":"82","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"83","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2009","2":"Maricopa, AZ","3":"Glendale","4":"Yes","5":"82","6":"Female","7":"A","8":"Asian","9":"N","10":"Not of Hispanic origin","11":"82","12":"Male","13":"A","14":"Asian","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1983","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"82","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"79","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1988","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"82","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"84","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"2007","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"82","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"87","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1995","2":"Pima, AZ","3":"Tucson","4":"Yes","5":"82","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"68","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1994","2":"Yavapai, AZ","3":"Yavapai County","4":"Yes","5":"82","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"85","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1982","2":"Yavapai, AZ","3":"Prescott","4":"Yes","5":"82","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"81","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2013","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"81","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"85","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1982","2":"Pima, AZ","3":"Tucson","4":"Yes","5":"81","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"83","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2004","2":"Pinal, AZ","3":"Pinal County","4":"Yes","5":"81","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"77","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2011","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"80","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"78","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1995","2":"Maricopa, AZ","3":"Mesa","4":"Yes","5":"80","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"81","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2006","2":"Maricopa, AZ","3":"Youngtown","4":"Yes","5":"80","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"83","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2008","2":"Pinal, AZ","3":"Pinal County","4":"Yes","5":"80","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"80","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1977","2":"Yuma, AZ","3":"Yuma","4":"Yes","5":"80","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"86","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1977","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"79","6":"Female","7":"B","8":"Black","9":"U","10":"Unknown or not reported","11":"70","12":"Male","13":"B","14":"Black","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1991","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"79","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"80","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2016","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"79","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"82","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1980","2":"Gila, AZ","3":"Payson","4":"Yes","5":"78","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"93","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1989","2":"Maricopa, AZ","3":"Scottsdale","4":"Yes","5":"78","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"70","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2003","2":"Maricopa, AZ","3":"Scottsdale","4":"Yes","5":"78","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"79","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2012","2":"Yavapai, AZ","3":"Yavapai County","4":"Yes","5":"78","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"80","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1991","2":"Coconino, AZ","3":"Flagstaff","4":"Yes","5":"77","6":"Female","7":"B","8":"Black","9":"N","10":"Not of Hispanic origin","11":"82","12":"Male","13":"B","14":"Black","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1985","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"77","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"74","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2002","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"77","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"77","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2007","2":"Maricopa, AZ","3":"Chandler","4":"Yes","5":"77","6":"Female","7":"W","8":"White","9":"H","10":"Hispanic origin","11":"80","12":"Male","13":"W","14":"White","15":"H","16":"Hispanic origin","17":"WI","18":"Wife"},{"1":"1997","2":"Maricopa, AZ","3":"Peoria","4":"Yes","5":"77","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"80","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2018","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"77","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"77","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"2004","2":"Maricopa, AZ","3":"Tempe","4":"Yes","5":"77","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"78","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1999","2":"Yavapai, AZ","3":"Yavapai County","4":"Yes","5":"77","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"79","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1979","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"76","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"78","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1998","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"76","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"77","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2014","2":"Pima, AZ","3":"Pima County","4":"Yes","5":"76","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"77","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1993","2":"Pima, AZ","3":"Tucson","4":"Yes","5":"76","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"78","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2000","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"75","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"75","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1978","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"75","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"76","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1981","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"75","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"78","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2005","2":"Maricopa, AZ","3":"Scottsdale","4":"Yes","5":"75","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"78","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2011","2":"Maricopa, AZ","3":"Tempe","4":"Yes","5":"75","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"77","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1999","2":"Pima, AZ","3":"Pima County","4":"Yes","5":"75","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"66","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1981","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"74","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"77","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1990","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"74","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"82","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2000","2":"Maricopa, AZ","3":"Mesa","4":"Yes","5":"74","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"76","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2000","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"74","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"76","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1992","2":"Mohave, AZ","3":"Kingman","4":"Yes","5":"74","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"77","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1987","2":"La Paz, AZ","3":"La Paz County","4":"Yes","5":"74","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"72","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"2013","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"73","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"78","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1993","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"73","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"73","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2015","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"73","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"78","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1991","2":"Maricopa, AZ","3":"Scottsdale","4":"Yes","5":"73","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"64","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2015","2":"Maricopa, AZ","3":"Scottsdale","4":"Yes","5":"73","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"74","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2002","2":"Pima, AZ","3":"Tucson","4":"Yes","5":"73","6":"Female","7":"A","8":"Asian","9":"N","10":"Not of Hispanic origin","11":"73","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1994","2":"Yavapai, AZ","3":"Prescott","4":"Yes","5":"73","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"84","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1979","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"72","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"69","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"2017","2":"Maricopa, AZ","3":"Scottsdale","4":"Yes","5":"72","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"67","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1984","2":"Pima, AZ","3":"Pima County","4":"Yes","5":"72","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"75","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1996","2":"Pima, AZ","3":"Pima County","4":"Yes","5":"72","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"73","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1998","2":"Pima, AZ","3":"Pima County","4":"Yes","5":"72","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"71","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1988","2":"Pima, AZ","3":"Tucson","4":"Yes","5":"72","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"70","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1991","2":"Maricopa, AZ","3":"Glendale","4":"Yes","5":"71","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"69","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1993","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"71","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"74","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1994","2":"Yuma, AZ","3":"Yuma County","4":"Yes","5":"71","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"68","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2009","2":"Coconino, AZ","3":"Flagstaff","4":"Yes","5":"70","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"62","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1990","2":"Gila, AZ","3":"Payson","4":"Yes","5":"70","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"70","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1980","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"70","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"73","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2006","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"70","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"76","12":"Male","13":"W","14":"White","15":"H","16":"Hispanic origin","17":"WI","18":"Wife"},{"1":"1976","2":"Pima, AZ","3":"Pima County","4":"Yes","5":"70","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"70","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1995","2":"Pima, AZ","3":"Pima County","4":"Yes","5":"70","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"77","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2006","2":"Pima, AZ","3":"Tucson","4":"Yes","5":"70","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"71","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1989","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"69","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"82","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2012","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"69","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"66","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2016","2":"Maricopa, AZ","3":"Glendale","4":"Yes","5":"69","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"69","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1988","2":"Maricopa, AZ","3":"Mesa","4":"Yes","5":"69","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"63","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1985","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"69","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"74","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2011","2":"Maricopa, AZ","3":"Tempe","4":"Yes","5":"69","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"64","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2017","2":"Pinal, AZ","3":"Maricopa","4":"Yes","5":"69","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"67","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2006","2":"Yuma, AZ","3":"Yuma County","4":"Yes","5":"69","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"70","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"2006","2":"Yuma, AZ","3":"Yuma","4":"Yes","5":"69","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"71","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2007","2":"Yuma, AZ","3":"Yuma","4":"Yes","5":"69","6":"Female","7":"B","8":"Black","9":"N","10":"Not of Hispanic origin","11":"71","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1990","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"68","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"65","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1979","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"68","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"69","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1990","2":"Maricopa, AZ","3":"Youngtown","4":"Yes","5":"68","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"61","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1986","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"67","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"71","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2000","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"67","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"67","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2003","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"67","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"68","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1987","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"67","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"70","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1986","2":"Maricopa, AZ","3":"Scottsdale","4":"Yes","5":"67","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"73","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2007","2":"Mohave, AZ","3":"Bullhead City","4":"Yes","5":"67","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"43","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1993","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"66","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"83","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2012","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"66","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"64","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1986","2":"Maricopa, AZ","3":"Scottsdale","4":"Yes","5":"66","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"66","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1997","2":"Yavapai, AZ","3":"Yavapai County","4":"Yes","5":"66","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"71","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"2005","2":"Yavapai, AZ","3":"Prescott Valley","4":"Yes","5":"66","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"69","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1995","2":"Maricopa, AZ","3":"Glendale","4":"Yes","5":"65","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"55","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1985","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"65","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"81","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1989","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"65","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"71","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2010","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"65","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"56","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"2012","2":"Mohave, AZ","3":"Bullhead City","4":"Yes","5":"65","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"61","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1996","2":"Pima, AZ","3":"Tucson","4":"Yes","5":"65","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"66","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2008","2":"Maricopa, AZ","3":"Glendale","4":"Yes","5":"64","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"65","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2012","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"64","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"83","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1992","2":"Santa Cruz, AZ","3":"Nogales","4":"Yes","5":"64","6":"Female","7":"W","8":"White","9":"H","10":"Hispanic origin","11":"82","12":"Male","13":"W","14":"White","15":"H","16":"Hispanic origin","17":"WI","18":"Wife"},{"1":"1992","2":"Mohave, AZ","3":"Bullhead City","4":"Yes","5":"63","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"66","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2010","2":"Pima, AZ","3":"Tucson","4":"Yes","5":"63","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"57","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2006","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"62","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"74","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2011","2":"Pima, AZ","3":"Tucson","4":"Yes","5":"62","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"59","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1981","2":"Yavapai, AZ","3":"Prescott","4":"Yes","5":"62","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"64","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2006","2":"Coconino, AZ","3":"Flagstaff","4":"Yes","5":"61","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"64","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2017","2":"Maricopa, AZ","3":"Mesa","4":"Yes","5":"61","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"60","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1990","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"61","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"65","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2003","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"61","6":"Female","7":"A","8":"Asian","9":"N","10":"Not of Hispanic origin","11":"57","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2015","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"61","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"67","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1987","2":"Pinal, AZ","3":"Pinal County","4":"Yes","5":"61","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"61","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1987","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"60","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"71","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"1987","2":"Maricopa, AZ","3":"Maricopa County","4":"Yes","5":"60","6":"Female","7":"W","8":"White","9":"U","10":"Unknown or not reported","11":"68","12":"Male","13":"W","14":"White","15":"U","16":"Unknown or not reported","17":"WI","18":"Wife"},{"1":"2017","2":"Maricopa, AZ","3":"Buckeye","4":"Yes","5":"60","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"43","12":"Male","13":"B","14":"Black","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"2011","2":"Maricopa, AZ","3":"Glendale","4":"Yes","5":"60","6":"Female","7":"A","8":"Asian","9":"N","10":"Not of Hispanic origin","11":"61","12":"Male","13":"A","14":"Asian","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1998","2":"Maricopa, AZ","3":"Phoenix","4":"Yes","5":"60","6":"Female","7":"W","8":"White","9":"H","10":"Hispanic origin","11":"58","12":"Male","13":"W","14":"White","15":"H","16":"Hispanic origin","17":"WI","18":"Wife"},{"1":"2014","2":"Mohave, AZ","3":"Kingman","4":"Yes","5":"60","6":"Female","7":"A","8":"Asian","9":"N","10":"Not of Hispanic origin","11":"64","12":"Male","13":"A","14":"Asian","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"},{"1":"1986","2":"Mohave, AZ","3":"Bullhead City","4":"Yes","5":"60","6":"Female","7":"W","8":"White","9":"N","10":"Not of Hispanic origin","11":"62","12":"Male","13":"W","14":"White","15":"N","16":"Not of Hispanic origin","17":"WI","18":"Wife"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>You could also use</p>
<pre><code>  relationship == &quot;Wife&quot;  &amp; 
      between (vic_age, 60, 998)  
      </code></pre>
<p>You might also notice that there is a Male “wife” as a victim, reflecting how poorly many police agencies fill out these forms.</p>
</div>
<div id="gun-related-killings-1" class="section level4 unnumbered">
<h4>Gun-related killings</h4>
<p>This is actually much more difficult than it sounds. Try to build it one piece at a time. Here is how I might build the conditions:
Guns:</p>
<pre><code>    ... weapon_code %in% c(&quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;14&quot;, &quot;15&quot;)</code></pre>
<p>(This is a text variable even though it looks like numbers - that means you need the quotes. Don’t forget to use the “c” for “combine into a list” before the list of values)<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p>
<p>Since 2015:</p>
<pre><code>    weapon_code %in% c(&quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;14&quot;, &quot;15&quot;) &amp;
    year &gt;= 2015</code></pre>
<p>Young men:</p>
<pre><code>    weapon_code %in% c(&quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;14&quot;, &quot;15&quot;) &amp;
    year &gt;= 2015 &amp; 
    between (vic_age, 15, 29)</code></pre>
<p>Black and Hispanic victims:</p>
<pre><code>    weapon_code %in% c(&quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;14&quot;, &quot;15&quot;) &amp;
    year &gt;= 2015 &amp; 
    between (vic_age, 15, 29)  &amp;
    (vic_race_code  == &quot;B&quot; | vic_ethnic_code = &quot;H&quot;)
    </code></pre>
<p>That last one is the trickiest – If you want to find both African-American AND Hispanic victims, you need to look for a race code of “B” OR an ethnicity code of “H”. Those have to be in a parenthese in order not to be confused with the other conditions. (I’m going to select just some of the columns and order it by the year and month of the murder, showing only the most recent). (NOTE: Eliminate the last line of this code if you haven’t installed and activated the “DT” package, which makes searchable, sortable tables.)</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" title="1">murder_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb77-2" title="2"><span class="st">  </span><span class="kw">filter</span> ( weapon_code <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;11&quot;</span>, <span class="st">&quot;12&quot;</span>, <span class="st">&quot;13&quot;</span>, <span class="st">&quot;14&quot;</span>, <span class="st">&quot;15&quot;</span>) <span class="op">&amp;</span></a>
<a class="sourceLine" id="cb77-3" title="3"><span class="st">           </span>year <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2015</span> <span class="op">&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb77-4" title="4"><span class="st">           </span><span class="kw">between</span> (vic_age, <span class="dv">15</span>, <span class="dv">29</span>)  <span class="op">&amp;</span></a>
<a class="sourceLine" id="cb77-5" title="5"><span class="st">           </span>(vic_race_code  <span class="op">==</span><span class="st"> &quot;B&quot;</span> <span class="op">|</span><span class="st"> </span>vic_ethnic_code <span class="op">==</span><span class="st"> &quot;H&quot;</span>)</a>
<a class="sourceLine" id="cb77-6" title="6">        ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb77-7" title="7"><span class="st">  </span><span class="kw">select</span> (year, month, cnty_name, state_abbr, solved, vic_age, vic_race, vic_ethnic,  weapon, relationship, circumstance ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb77-8" title="8"><span class="st">  </span><span class="kw">arrange</span> (year, month) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb77-9" title="9"><span class="st">  </span><span class="kw">tail</span> (<span class="dv">50</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb77-10" title="10"><span class="st">  </span><span class="kw">datatable</span>( <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">scrollX =</span> <span class="st">&#39;500px&#39;</span>))</a></code></pre></div>
<div id="htmlwidget-a53c63025318e60d49ff" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a53c63025318e60d49ff">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50"],[2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018,2018],[10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12],["Clark, NV","Multnomah, OR","Multnomah, OR","Salt Lake, UT","Benton, WA","Pierce, WA","Pierce, WA","Spokane, WA","King, WA","Gila, AZ","Gila, AZ","Maricopa, AZ","Maricopa, AZ","Maricopa, AZ","Maricopa, AZ","Maricopa, AZ","Maricopa, AZ","Pima, AZ","Pima, AZ","Pima, AZ","El Paso, CO","El Paso, CO","Jefferson, CO","Bernalillo, NM","Bernalillo, NM","Clark, NV","Clark, NV","Clark, NV","Clark, NV","Clark, NV","Clark, NV","Clark, NV","Multnomah, OR","Washington, OR","Yakima, WA","Maricopa, AZ","Maricopa, AZ","Maricopa, AZ","Maricopa, AZ","Logan, CO","Denver, CO","Denver, CO","Denver, CO","Bernalillo, NM","Clark, NV","Clark, NV","Franklin, WA","Pierce, WA","Snohomish, WA","Yakima, WA"],["NV","OR","OR","UT","WA","WA","WA","WA","WA","AZ","AZ","AZ","AZ","AZ","AZ","AZ","AZ","AZ","AZ","AZ","CO","CO","CO","NM","NM","NV","NV","NV","NV","NV","NV","NV","OR","OR","WA","AZ","AZ","AZ","AZ","CO","CO","CO","CO","NM","NV","NV","WA","WA","WA","WA"],["Yes","No","No","No","Yes","No","Yes","Yes","Yes","Yes","Yes","Yes","No","Yes","Yes","Yes","No","Yes","Yes","No","Yes","Yes","Yes","Yes","Yes","No","Yes","No","No","Yes","Yes","Yes","No","Yes","Yes","No","Yes","Yes","No","Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes","No","Yes","Yes"],[26,21,27,18,28,28,18,15,26,22,22,24,24,24,19,28,18,28,16,25,26,23,28,18,18,20,22,24,29,19,16,17,26,19,16,22,23,18,22,15,28,23,20,15,26,18,29,17,23,22],["White","Black","Black","White","Black","Black","Black","Black","White","White","White","Black","Black","Black","White","Black","Black","Black","Black","White","Black","Black","White","White","White","Black","Black","White","White","Black","Black","Black","Black","White","White","White","Black","Black","Black","Black","Black","Black","Black","White","Black","Black","White","Black","Black","White"],["Hispanic origin","Unknown or not reported","Unknown or not reported","Hispanic origin","Not of Hispanic origin","Unknown or not reported","Not of Hispanic origin","Unknown or not reported","Hispanic origin","Hispanic origin","Hispanic origin","Not of Hispanic origin","Unknown or not reported","Unknown or not reported","Hispanic origin","Unknown or not reported","Unknown or not reported","Unknown or not reported","Not of Hispanic origin","Hispanic origin","Not of Hispanic origin","Not of Hispanic origin","Hispanic origin","Hispanic origin","Hispanic origin","Not of Hispanic origin","Not of Hispanic origin","Hispanic origin","Hispanic origin","Not of Hispanic origin","Not of Hispanic origin","Not of Hispanic origin","Unknown or not reported","Hispanic origin","Hispanic origin","Hispanic origin","Unknown or not reported","Unknown or not reported","Not of Hispanic origin","Not of Hispanic origin","Not of Hispanic origin","Not of Hispanic origin","Not of Hispanic origin","Hispanic origin","Not of Hispanic origin","Not of Hispanic origin","Hispanic origin","Not of Hispanic origin","Not of Hispanic origin","Hispanic origin"],["Handgun - pistol, revolver, etc","Firearm, type not stated","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Firearm, type not stated","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Firearm, type not stated","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Firearm, type not stated","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Firearm, type not stated","Handgun - pistol, revolver, etc","Firearm, type not stated","Handgun - pistol, revolver, etc","Firearm, type not stated","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Firearm, type not stated","Handgun - pistol, revolver, etc","Firearm, type not stated","Firearm, type not stated","Firearm, type not stated","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Handgun - pistol, revolver, etc","Firearm, type not stated","Firearm, type not stated","Handgun - pistol, revolver, etc","Firearm, type not stated"],["Stranger","Relationship not determined","Relationship not determined","Relationship not determined","Other - known to victim","Relationship not determined","Friend","Stranger","Relationship not determined","Stranger","Stranger","Stranger","Relationship not determined","Acquaintance","Stranger","Relationship not determined","Relationship not determined","Stranger","Acquaintance","Relationship not determined","Relationship not determined","Friend","Other - known to victim","Acquaintance","Stranger","Relationship not determined","Relationship not determined","Relationship not determined","Other - known to victim","Stranger","Stranger","Girlfriend","Relationship not determined","Friend","Relationship not determined","Relationship not determined","Relationship not determined","Stranger","Relationship not determined","Friend","Relationship not determined","Relationship not determined","Stranger","Acquaintance","Other - known to victim","Acquaintance","Acquaintance","Relationship not determined","Relationship not determined","Relationship not determined"],["Felon killed by police","Other","Other arguments","Other arguments","Circumstances undetermined","Other arguments","Circumstances undetermined","Other arguments","Other","Circumstances undetermined","Circumstances undetermined","Felon killed by police","Circumstances undetermined","Circumstances undetermined","Narcotic drug laws","Circumstances undetermined","Circumstances undetermined","Other arguments","Narcotic drug laws","Gangland killings","Other arguments","Other arguments","Gangland killings","Other","Felon killed by police","Other - not specified","Felon killed by private citizen","Other - not specified","Other arguments","Felon killed by private citizen","Gangland killings","Other arguments","Other arguments","Other negligent handling of gun","Circumstances undetermined","Circumstances undetermined","Circumstances undetermined","Circumstances undetermined","Circumstances undetermined","Circumstances undetermined","Other arguments","Other arguments","Circumstances undetermined","Narcotic drug laws","Other arguments","Gangland killings","Other","Circumstances undetermined","Other","Circumstances undetermined"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>year<\/th>\n      <th>month<\/th>\n      <th>cnty_name<\/th>\n      <th>state_abbr<\/th>\n      <th>solved<\/th>\n      <th>vic_age<\/th>\n      <th>vic_race<\/th>\n      <th>vic_ethnic<\/th>\n      <th>weapon<\/th>\n      <th>relationship<\/th>\n      <th>circumstance<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":"500px","columnDefs":[{"className":"dt-right","targets":[1,2,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>If this complex filter seems too complex, you can always chain one filter after another to check your data as you go. For example, you could do this:</p>
<pre><code>     murder_data %&gt;%
        filter ( weapon_code %in% c(&quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;14&quot;, &quot;15&quot;) ) %&gt;%
        filter ( vic_race_code == &quot;B&quot; | vic_ethnic_code == &quot;H&quot;) ....
        
        
        </code></pre>
</div>
</div>
<div id="group-by" class="section level3">
<h3><span class="header-section-number">C.3.2</span> Group by</h3>
<div id="the-most-1" class="section level4 unnumbered">
<h4>“The most”</h4>
<ol style="list-style-type: decimal">
<li>County with the most killings</li>
</ol>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" title="1">murder_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb79-2" title="2"><span class="st">  </span><span class="kw">group_by</span> (state_abbr, cnty_name) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb79-3" title="3"><span class="st">  </span><span class="kw">summarise</span> ( <span class="dt">cases =</span> <span class="kw">n</span>() ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb79-4" title="4"><span class="st">  </span><span class="kw">arrange</span> (<span class="kw">desc</span> (cases))</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state_abbr"],"name":[1],"type":["chr"],"align":["left"]},{"label":["cnty_name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["cases"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"AZ","2":"Maricopa, AZ","3":"10128"},{"1":"NV","2":"Clark, NV","3":"5649"},{"1":"WA","2":"King, WA","3":"3256"},{"1":"CO","2":"Denver, CO","3":"2955"},{"1":"AZ","2":"Pima, AZ","3":"2854"},{"1":"NM","2":"Bernalillo, NM","3":"2361"},{"1":"OR","2":"Multnomah, OR","3":"1792"},{"1":"WA","2":"Pierce, WA","3":"1539"},{"1":"UT","2":"Salt Lake, UT","3":"1431"},{"1":"CO","2":"El Paso, CO","3":"1037"},{"1":"CO","2":"Arapahoe, CO","3":"975"},{"1":"NV","2":"Washoe, NV","3":"817"},{"1":"WA","2":"Spokane, WA","3":"741"},{"1":"NM","2":"Santa Fe, NM","3":"692"},{"1":"WA","2":"Yakima, WA","3":"672"},{"1":"CO","2":"Adams, CO","3":"588"},{"1":"AZ","2":"Pinal, AZ","3":"540"},{"1":"WA","2":"Snohomish, WA","3":"521"},{"1":"OR","2":"Marion, OR","3":"471"},{"1":"CO","2":"Jefferson, CO","3":"443"},{"1":"AZ","2":"Mohave, AZ","3":"416"},{"1":"OR","2":"Lane, OR","3":"368"},{"1":"CO","2":"Pueblo, CO","3":"367"},{"1":"WA","2":"Clark, WA","3":"330"},{"1":"AZ","2":"Yuma, AZ","3":"319"},{"1":"OR","2":"Clackamas, OR","3":"317"},{"1":"NM","2":"Chaves, NM","3":"305"},{"1":"OR","2":"Washington, OR","3":"299"},{"1":"CO","2":"Weld, CO","3":"293"},{"1":"AZ","2":"Yavapai, AZ","3":"292"},{"1":"NM","2":"Dona Ana, NM","3":"284"},{"1":"UT","2":"Weber, UT","3":"272"},{"1":"ID","2":"Ada, ID","3":"263"},{"1":"NM","2":"San Juan, NM","3":"246"},{"1":"OR","2":"Jackson, OR","3":"224"},{"1":"CO","2":"Larimer, CO","3":"213"},{"1":"AZ","2":"Cochise, AZ","3":"208"},{"1":"WA","2":"Kitsap, WA","3":"205"},{"1":"AZ","2":"Coconino, AZ","3":"204"},{"1":"ID","2":"Canyon, ID","3":"201"},{"1":"NM","2":"Lea, NM","3":"197"},{"1":"UT","2":"Utah, UT","3":"196"},{"1":"CO","2":"Boulder, CO","3":"195"},{"1":"WA","2":"Thurston, WA","3":"190"},{"1":"CO","2":"Mesa, CO","3":"184"},{"1":"WA","2":"Benton, WA","3":"174"},{"1":"OR","2":"Klamath, OR","3":"172"},{"1":"MT","2":"Yellowstone, MT","3":"169"},{"1":"OR","2":"Josephine, OR","3":"164"},{"1":"WA","2":"Whatcom, WA","3":"161"},{"1":"NM","2":"McKinley, NM","3":"158"},{"1":"WA","2":"Franklin, WA","3":"152"},{"1":"WA","2":"Skagit, WA","3":"140"},{"1":"WA","2":"Grant, WA","3":"136"},{"1":"OR","2":"Douglas, OR","3":"133"},{"1":"AZ","2":"Navajo, AZ","3":"132"},{"1":"UT","2":"Davis, UT","3":"132"},{"1":"WY","2":"Laramie, WY","3":"128"},{"1":"AZ","2":"Apache, AZ","3":"127"},{"1":"ID","2":"Kootenai, ID","3":"126"},{"1":"WA","2":"Cowlitz, WA","3":"124"},{"1":"WA","2":"Grays Harbor, WA","3":"121"},{"1":"WY","2":"Natrona, WY","3":"115"},{"1":"OR","2":"Umatilla, OR","3":"114"},{"1":"NM","2":"Eddy, NM","3":"112"},{"1":"OR","2":"Linn, OR","3":"111"},{"1":"OR","2":"Coos, OR","3":"110"},{"1":"OR","2":"Deschutes, OR","3":"109"},{"1":"NM","2":"Valencia, NM","3":"107"},{"1":"NM","2":"Curry, NM","3":"106"},{"1":"WA","2":"Lewis, WA","3":"105"},{"1":"WA","2":"Chelan, WA","3":"104"},{"1":"NV","2":"Elko, NV","3":"101"},{"1":"MT","2":"Cascade, MT","3":"98"},{"1":"WY","2":"Sweetwater, WY","3":"95"},{"1":"WA","2":"Mason, WA","3":"94"},{"1":"CO","2":"Douglas, CO","3":"93"},{"1":"NM","2":"Otero, NM","3":"89"},{"1":"ID","2":"Twin Falls, ID","3":"87"},{"1":"ID","2":"Bonneville, ID","3":"86"},{"1":"AZ","2":"Gila, AZ","3":"83"},{"1":"NM","2":"Sandoval, NM","3":"83"},{"1":"OR","2":"Yamhill, OR","3":"79"},{"1":"MT","2":"Missoula, MT","3":"76"},{"1":"WA","2":"Clallam, WA","3":"76"},{"1":"ID","2":"Bannock, ID","3":"75"},{"1":"WA","2":"Walla Walla, WA","3":"74"},{"1":"OR","2":"Polk, OR","3":"71"},{"1":"WY","2":"Fremont, WY","3":"69"},{"1":"MT","2":"Flathead, MT","3":"68"},{"1":"WA","2":"Okanogan, WA","3":"68"},{"1":"WA","2":"Stevens, WA","3":"67"},{"1":"OR","2":"Lincoln, OR","3":"60"},{"1":"NM","2":"Luna, NM","3":"58"},{"1":"NV","2":"Lyon, NV","3":"58"},{"1":"NM","2":"San Miguel, NM","3":"57"},{"1":"NV","2":"Nye, NV","3":"57"},{"1":"ID","2":"Boise, ID","3":"56"},{"1":"AZ","2":"Santa Cruz, AZ","3":"55"},{"1":"NM","2":"Rio Arriba, NM","3":"53"},{"1":"WY","2":"Campbell, WY","3":"53"},{"1":"CO","2":"Fremont, CO","3":"52"},{"1":"OR","2":"Benton, OR","3":"52"},{"1":"OR","2":"Wasco, OR","3":"52"},{"1":"UT","2":"Tooele, UT","3":"50"},{"1":"AZ","2":"La Paz, AZ","3":"49"},{"1":"ID","2":"Cassia, ID","3":"49"},{"1":"MT","2":"Lewis and Clark, MT","3":"49"},{"1":"UT","2":"Washington, UT","3":"49"},{"1":"CO","2":"La Plata, CO","3":"48"},{"1":"ID","2":"Nez Perce, ID","3":"48"},{"1":"ID","2":"Bingham, ID","3":"47"},{"1":"NM","2":"Taos, NM","3":"46"},{"1":"CO","2":"Garfield, CO","3":"45"},{"1":"OR","2":"Clatsop, OR","3":"45"},{"1":"UT","2":"Carbon, UT","3":"45"},{"1":"CO","2":"Las Animas, CO","3":"44"},{"1":"NV","2":"Humboldt, NV","3":"44"},{"1":"OR","2":"Malheur, OR","3":"44"},{"1":"CO","2":"Montezuma, CO","3":"43"},{"1":"ID","2":"Bonner, ID","3":"43"},{"1":"OR","2":"Columbia, OR","3":"43"},{"1":"UT","2":"Uintah, UT","3":"43"},{"1":"OR","2":"Union, OR","3":"42"},{"1":"NM","2":"Cibola, NM","3":"40"},{"1":"NM","2":"Grant, NM","3":"40"},{"1":"WA","2":"Island, WA","3":"40"},{"1":"WA","2":"Douglas, WA","3":"39"},{"1":"OR","2":"Tillamook, OR","3":"38"},{"1":"WA","2":"Adams, WA","3":"38"},{"1":"WY","2":"Carbon, WY","3":"38"},{"1":"NV","2":"Carson City city, NV","3":"37"},{"1":"UT","2":"Iron, UT","3":"37"},{"1":"WY","2":"Uinta, WY","3":"37"},{"1":"OR","2":"Curry, OR","3":"36"},{"1":"CO","2":"Montrose, CO","3":"35"},{"1":"CO","2":"Otero, CO","3":"35"},{"1":"MT","2":"Lake, MT","3":"35"},{"1":"MT","2":"Silver Bow, MT","3":"35"},{"1":"NV","2":"Douglas, NV","3":"34"},{"1":"CO","2":"Teller, CO","3":"33"},{"1":"ID","2":"Shoshone, ID","3":"33"},{"1":"NM","2":"Lincoln, NM","3":"33"},{"1":"WA","2":"Klickitat, WA","3":"33"},{"1":"WY","2":"Albany, WY","3":"33"},{"1":"CO","2":"Alamosa, CO","3":"31"},{"1":"CO","2":"Delta, CO","3":"31"},{"1":"ID","2":"Latah, ID","3":"31"},{"1":"MT","2":"Gallatin, MT","3":"31"},{"1":"UT","2":"Box Elder, UT","3":"31"},{"1":"NV","2":"Churchill, NV","3":"30"},{"1":"NV","2":"White Pine, NV","3":"30"},{"1":"OR","2":"Jefferson, OR","3":"30"},{"1":"UT","2":"Cache, UT","3":"30"},{"1":"WY","2":"Sheridan, WY","3":"30"},{"1":"CO","2":"Morgan, CO","3":"29"},{"1":"ID","2":"Payette, ID","3":"29"},{"1":"AZ","2":"Graham, AZ","3":"28"},{"1":"CO","2":"Park, CO","3":"28"},{"1":"NM","2":"Roosevelt, NM","3":"28"},{"1":"WY","2":"Park, WY","3":"28"},{"1":"CO","2":"Rio Grande, CO","3":"27"},{"1":"ID","2":"Elmore, ID","3":"27"},{"1":"CO","2":"Eagle, CO","3":"26"},{"1":"CO","2":"Summit, CO","3":"25"},{"1":"ID","2":"Jerome, ID","3":"25"},{"1":"WA","2":"Jefferson, WA","3":"25"},{"1":"WY","2":"Converse, WY","3":"25"},{"1":"ID","2":"Idaho, ID","3":"24"},{"1":"MT","2":"Lincoln, MT","3":"24"},{"1":"NM","2":"Quay, NM","3":"24"},{"1":"NM","2":"Sierra, NM","3":"24"},{"1":"OR","2":"Grant, OR","3":"24"},{"1":"WA","2":"Asotin, WA","3":"24"},{"1":"WA","2":"Kittitas, WA","3":"24"},{"1":"WA","2":"Pacific, WA","3":"24"},{"1":"WA","2":"Skamania, WA","3":"24"},{"1":"CO","2":"Logan, CO","3":"23"},{"1":"NM","2":"Socorro, NM","3":"23"},{"1":"UT","2":"Duchesne, UT","3":"23"},{"1":"UT","2":"Grand, UT","3":"23"},{"1":"UT","2":"Summit, UT","3":"23"},{"1":"WY","2":"Lincoln, WY","3":"23"},{"1":"ID","2":"Minidoka, ID","3":"22"},{"1":"WY","2":"Sublette, WY","3":"22"},{"1":"CO","2":"Saguache, CO","3":"21"},{"1":"MT","2":"Big Horn, MT","3":"21"},{"1":"MT","2":"Deer Lodge, MT","3":"21"},{"1":"WA","2":"Pend Oreille, WA","3":"21"},{"1":"CO","2":"Moffat, CO","3":"20"},{"1":"ID","2":"Boundary, ID","3":"20"},{"1":"MT","2":"Hill, MT","3":"20"},{"1":"MT","2":"Roosevelt, MT","3":"20"},{"1":"OR","2":"Hood River, OR","3":"20"},{"1":"CO","2":"Clear Creek, CO","3":"19"},{"1":"NM","2":"Torrance, NM","3":"19"},{"1":"OR","2":"Crook, OR","3":"19"},{"1":"ID","2":"Jefferson, ID","3":"18"},{"1":"NV","2":"Lander, NV","3":"18"},{"1":"NV","2":"Pershing, NV","3":"18"},{"1":"UT","2":"Sevier, UT","3":"18"},{"1":"WA","2":"Whitman, WA","3":"18"},{"1":"WY","2":"Big Horn, WY","3":"18"},{"1":"CO","2":"Prowers, CO","3":"17"},{"1":"ID","2":"Blaine, ID","3":"17"},{"1":"MT","2":"Custer, MT","3":"17"},{"1":"MT","2":"Sanders, MT","3":"17"},{"1":"NM","2":"Guadalupe, NM","3":"17"},{"1":"UT","2":"Millard, UT","3":"17"},{"1":"WA","2":"Ferry, WA","3":"17"},{"1":"CO","2":"Archuleta, CO","3":"16"},{"1":"MT","2":"Carbon, MT","3":"16"},{"1":"OR","2":"Baker, OR","3":"16"},{"1":"CO","2":"Gilpin, CO","3":"15"},{"1":"CO","2":"Grand, CO","3":"15"},{"1":"CO","2":"Huerfano, CO","3":"15"},{"1":"ID","2":"Benewah, ID","3":"15"},{"1":"WY","2":"Platte, WY","3":"15"},{"1":"CO","2":"Broomfield, CO","3":"14"},{"1":"CO","2":"Routt, CO","3":"14"},{"1":"MT","2":"Ravalli, MT","3":"14"},{"1":"UT","2":"Emery, UT","3":"14"},{"1":"WA","2":"San Juan, WA","3":"14"},{"1":"WY","2":"Hot Springs, WY","3":"14"},{"1":"WY","2":"Johnson, WY","3":"14"},{"1":"CO","2":"Conejos, CO","3":"13"},{"1":"CO","2":"Rio Blanco, CO","3":"13"},{"1":"ID","2":"Gooding, ID","3":"13"},{"1":"ID","2":"Owyhee, ID","3":"13"},{"1":"ID","2":"Power, ID","3":"13"},{"1":"MT","2":"Rosebud, MT","3":"13"},{"1":"NM","2":"Colfax, NM","3":"13"},{"1":"NV","2":"Storey, NV","3":"13"},{"1":"OR","2":"Harney, OR","3":"13"},{"1":"OR","2":"Morrow, OR","3":"13"},{"1":"UT","2":"Beaver, UT","3":"13"},{"1":"CO","2":"Pitkin, CO","3":"12"},{"1":"NV","2":"Mineral, NV","3":"12"},{"1":"OR","2":"Lake, OR","3":"12"},{"1":"CO","2":"Bent, CO","3":"11"},{"1":"CO","2":"Chaffee, CO","3":"11"},{"1":"ID","2":"Madison, ID","3":"11"},{"1":"MT","2":"Valley, MT","3":"11"},{"1":"UT","2":"San Juan, UT","3":"11"},{"1":"WY","2":"Goshen, WY","3":"11"},{"1":"WY","2":"Teton, WY","3":"11"},{"1":"ID","2":"Clearwater, ID","3":"10"},{"1":"ID","2":"Franklin, ID","3":"10"},{"1":"ID","2":"Fremont, ID","3":"10"},{"1":"ID","2":"Gem, ID","3":"10"},{"1":"ID","2":"Washington, ID","3":"10"},{"1":"MT","2":"Glacier, MT","3":"10"},{"1":"MT","2":"Phillips, MT","3":"10"},{"1":"NM","2":"Catron, NM","3":"10"},{"1":"NV","2":"Lincoln, NV","3":"10"},{"1":"UT","2":"Sanpete, UT","3":"10"},{"1":"UT","2":"Wasatch, UT","3":"10"},{"1":"WY","2":"Crook, WY","3":"10"},{"1":"CO","2":"Kit Carson, CO","3":"9"},{"1":"CO","2":"Lake, CO","3":"9"},{"1":"ID","2":"Custer, ID","3":"9"},{"1":"ID","2":"Lemhi, ID","3":"9"},{"1":"ID","2":"Oneida, ID","3":"9"},{"1":"ID","2":"Valley, ID","3":"9"},{"1":"UT","2":"Kane, UT","3":"9"},{"1":"WY","2":"Washakie, WY","3":"9"},{"1":"AZ","2":"Greenlee, AZ","3":"8"},{"1":"CO","2":"Elbert, CO","3":"8"},{"1":"CO","2":"Lincoln, CO","3":"8"},{"1":"MT","2":"Dawson, MT","3":"8"},{"1":"NM","2":"Los Alamos, NM","3":"8"},{"1":"NM","2":"Union, NM","3":"8"},{"1":"WY","2":"Weston, WY","3":"8"},{"1":"CO","2":"Gunnison, CO","3":"7"},{"1":"CO","2":"Hinsdale, CO","3":"7"},{"1":"ID","2":"Lincoln, ID","3":"7"},{"1":"MT","2":"Beaverhead, MT","3":"7"},{"1":"MT","2":"Fergus, MT","3":"7"},{"1":"MT","2":"Musselshell, MT","3":"7"},{"1":"CO","2":"Crowley, CO","3":"6"},{"1":"MT","2":"Broadwater, MT","3":"6"},{"1":"MT","2":"Chouteau, MT","3":"6"},{"1":"MT","2":"Stillwater, MT","3":"6"},{"1":"OR","2":"Sherman, OR","3":"6"},{"1":"OR","2":"Wallowa, OR","3":"6"},{"1":"UT","2":"Juab, UT","3":"6"},{"1":"UT","2":"Morgan, UT","3":"6"},{"1":"CO","2":"Phillips, CO","3":"5"},{"1":"CO","2":"San Miguel, CO","3":"5"},{"1":"CO","2":"Sedgwick, CO","3":"5"},{"1":"CO","2":"Yuma, CO","3":"5"},{"1":"ID","2":"Adams, ID","3":"5"},{"1":"ID","2":"Bear Lake, ID","3":"5"},{"1":"ID","2":"Caribou, ID","3":"5"},{"1":"ID","2":"Lewis, ID","3":"5"},{"1":"MT","2":"Meagher, MT","3":"5"},{"1":"MT","2":"Mineral, MT","3":"5"},{"1":"MT","2":"Park, MT","3":"5"},{"1":"MT","2":"Pondera, MT","3":"5"},{"1":"MT","2":"Sweet Grass, MT","3":"5"},{"1":"WA","2":"Columbia, WA","3":"5"},{"1":"WA","2":"Wahkiakum, WA","3":"5"},{"1":"CO","2":"Custer, CO","3":"4"},{"1":"CO","2":"San Juan, CO","3":"4"},{"1":"CO","2":"Washington, CO","3":"4"},{"1":"MT","2":"Blaine, MT","3":"4"},{"1":"MT","2":"Madison, MT","3":"4"},{"1":"MT","2":"Powell, MT","3":"4"},{"1":"MT","2":"Toole, MT","3":"4"},{"1":"UT","2":"Daggett, UT","3":"4"},{"1":"WA","2":"Lincoln, WA","3":"4"},{"1":"CO","2":"Baca, CO","3":"3"},{"1":"ID","2":"Clark, ID","3":"3"},{"1":"ID","2":"Teton, ID","3":"3"},{"1":"MT","2":"Granite, MT","3":"3"},{"1":"NM","2":"Hidalgo, NM","3":"3"},{"1":"NV","2":"Esmeralda, NV","3":"3"},{"1":"WY","2":"Niobrara, WY","3":"3"},{"1":"CO","2":"Cheyenne, CO","3":"2"},{"1":"CO","2":"Costilla, CO","3":"2"},{"1":"CO","2":"Jackson, CO","3":"2"},{"1":"CO","2":"Mineral, CO","3":"2"},{"1":"ID","2":"Butte, ID","3":"2"},{"1":"ID","2":"Camas, ID","3":"2"},{"1":"MT","2":"Jefferson, MT","3":"2"},{"1":"MT","2":"Richland, MT","3":"2"},{"1":"MT","2":"Sheridan, MT","3":"2"},{"1":"MT","2":"Teton, MT","3":"2"},{"1":"MT","2":"Treasure, MT","3":"2"},{"1":"NV","2":"Eureka, NV","3":"2"},{"1":"OR","2":"Wheeler, OR","3":"2"},{"1":"UT","2":"Wayne, UT","3":"2"},{"1":"CO","2":"Dolores, CO","3":"1"},{"1":"MT","2":"Carter, MT","3":"1"},{"1":"MT","2":"Daniels, MT","3":"1"},{"1":"MT","2":"Fallon, MT","3":"1"},{"1":"MT","2":"Garfield, MT","3":"1"},{"1":"MT","2":"Golden Valley, MT","3":"1"},{"1":"MT","2":"Liberty, MT","3":"1"},{"1":"MT","2":"McCone, MT","3":"1"},{"1":"MT","2":"Powder River, MT","3":"1"},{"1":"MT","2":"Wheatland, MT","3":"1"},{"1":"NM","2":"Harding, NM","3":"1"},{"1":"NM","2":"Mora, NM","3":"1"},{"1":"OR","2":"Gilliam, OR","3":"1"},{"1":"UT","2":"Garfield, UT","3":"1"},{"1":"UT","2":"Piute, UT","3":"1"},{"1":"UT","2":"Rich, UT","3":"1"},{"1":"WA","2":"Garfield, WA","3":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Why is this answer not surprising? (Hint: Clark County, Nevada, has about half the population of Maricopa.) We’ll get to ways to normalize this in later chapters.</p>
<p>To just get the police shootings, filter the above query for <code>circumstance_code == "81"</code> before the <code>group_by</code></p>
<ol start="2" style="list-style-type: decimal">
<li>Murders by state and year</li>
</ol>
<p>(I’m putting the most recent year at the top)</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" title="1">murder_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb80-2" title="2"><span class="st">  </span><span class="kw">group_by</span> (year, state_abbr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb80-3" title="3"><span class="st">  </span><span class="kw">summarise</span> (<span class="dt">cases =</span> <span class="kw">n</span>() ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb80-4" title="4"><span class="st">  </span><span class="co">#bonus: Calculate the total number of cases by year:</span></a>
<a class="sourceLine" id="cb80-5" title="5"><span class="st">  </span><span class="kw">mutate</span> ( <span class="dt">total_cases =</span> <span class="kw">sum</span>(cases) )  <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb80-6" title="6"><span class="st">  </span><span class="kw">pivot_wider</span> (<span class="dt">names_from =</span> state_abbr, <span class="dt">values_from =</span> cases) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb80-7" title="7"><span class="st">  </span><span class="kw">arrange</span> ( <span class="kw">desc</span> (year)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb80-8" title="8"><span class="st">  </span><span class="co">#Extra! fancy table that requires the DT package.</span></a>
<a class="sourceLine" id="cb80-9" title="9"><span class="st">  </span><span class="kw">datatable</span>( <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">scrollX=</span> <span class="st">&quot;400px&quot;</span>, </a>
<a class="sourceLine" id="cb80-10" title="10">                            <span class="dt">pageLength =</span> <span class="st">&quot;5&quot;</span>, </a>
<a class="sourceLine" id="cb80-11" title="11">                            <span class="dt">lengthMenu =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb80-12" title="12">                            )</a>
<a class="sourceLine" id="cb80-13" title="13">             )</a></code></pre></div>
<p><div id="htmlwidget-a96e19864a5bb8f63802" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a96e19864a5bb8f63802">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43"],[2018,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976],[1613,1773,1448,1299,1227,1249,1223,1233,1241,1282,1351,1466,1467,1479,1464,1397,1373,1346,1149,1331,1417,1401,1475,1582,1541,1382,1383,1264,1153,1140,1300,1212,1350,1206,1117,1122,1135,1104,1295,1137,1056,949,943],[425,484,394,344,313,383,365,379,400,370,453,516,509,473,458,482,446,448,385,424,396,401,390,478,438,362,345,308,301,291,306,266,321,264,248,225,247,237,293,233,242,231,169],[248,252,208,189,165,186,172,167,145,165,160,161,176,177,216,190,181,154,134,201,195,175,182,219,187,221,232,213,166,166,206,211,247,204,192,214,193,230,198,171,194,176,183],[37,48,47,32,30,30,29,31,22,22,23,51,33,42,32,28,36,33,17,26,36,43,50,48,40,32,38,17,34,28,35,35,32,24,37,36,25,45,30,56,46,51,48],[40,43,37,38,30,16,23,19,23,28,28,15,21,23,29,22,13,22,12,11,11,16,null,19,null,null,20,18,1,22,19,null,2,30,32,23,1,23,29,33,36,30,27],[168,166,111,105,128,119,112,132,142,156,144,164,111,139,158,113,149,98,126,147,157,114,144,120,115,102,101,115,96,108,134,131,145,138,79,81,115,4,141,125,87,91,115],[239,311,228,203,185,168,136,155,175,183,183,208,242,225,187,202,191,197,135,174,184,196,227,174,176,137,136,139,105,98,104,82,110,101,97,118,130,159,154,125,93,83,78],[115,131,111,85,84,85,97,92,93,98,92,82,107,97,105,78,76,102,71,95,140,113,139,146,178,154,163,163,125,148,161,166,184,133,147,113,143,118,141,112,121,106,98],[69,82,76,61,72,51,57,55,58,41,47,65,52,60,58,61,57,82,54,58,66,75,67,78,70,69,54,55,53,46,48,56,55,53,49,56,55,54,53,54,49,36,41],[255,242,213,224,206,194,215,183,175,207,210,186,207,226,208,204,208,199,203,182,215,250,258,288,317,287,274,221,249,211,273,254,225,234,216,226,192,208,222,184,164,129,162],[17,14,23,18,14,17,17,20,8,12,11,18,9,17,13,17,16,11,12,13,17,18,18,12,20,18,20,15,23,22,14,11,29,25,20,30,34,26,34,44,24,16,22]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>year<\/th>\n      <th>total_cases<\/th>\n      <th>AZ<\/th>\n      <th>CO<\/th>\n      <th>ID<\/th>\n      <th>MT<\/th>\n      <th>NM<\/th>\n      <th>NV<\/th>\n      <th>OR<\/th>\n      <th>UT<\/th>\n      <th>WA<\/th>\n      <th>WY<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":"400px","pageLength":"5","lengthMenu":[5,10,50],"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10,11,12]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
Does this mean that these states have suddenly become more dangerous? What about population growth?</p>
<p><strong>Alternative method</strong></p>
<p>The <code>janitor</code> package (which you may need to install) has a way to create cross-tabulations like this more simply. The function is <code>tabyl</code> (to distinguish from other table operations in R, which you probably want to avoid). Here’s an example:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" title="1">murder_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb81-2" title="2"><span class="st">  </span><span class="kw">tabyl</span> ( year , state_abbr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb81-3" title="3"><span class="st">  </span><span class="kw">arrange</span> ( <span class="kw">desc</span> (year) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb81-4" title="4"><span class="st">  </span><span class="kw">head</span> () <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb81-5" title="5"><span class="st">  </span><span class="co">#to make a nicer looking table, with the knitr() package</span></a>
<a class="sourceLine" id="cb81-6" title="6"><span class="st">  </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="right">AZ</th>
<th align="right">CO</th>
<th align="right">ID</th>
<th align="right">MT</th>
<th align="right">NM</th>
<th align="right">NV</th>
<th align="right">OR</th>
<th align="right">UT</th>
<th align="right">WA</th>
<th align="right">WY</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2018</td>
<td align="right">425</td>
<td align="right">248</td>
<td align="right">37</td>
<td align="right">40</td>
<td align="right">168</td>
<td align="right">239</td>
<td align="right">115</td>
<td align="right">69</td>
<td align="right">255</td>
<td align="right">17</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">484</td>
<td align="right">252</td>
<td align="right">48</td>
<td align="right">43</td>
<td align="right">166</td>
<td align="right">311</td>
<td align="right">131</td>
<td align="right">82</td>
<td align="right">242</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="right">2016</td>
<td align="right">394</td>
<td align="right">208</td>
<td align="right">47</td>
<td align="right">37</td>
<td align="right">111</td>
<td align="right">228</td>
<td align="right">111</td>
<td align="right">76</td>
<td align="right">213</td>
<td align="right">23</td>
</tr>
<tr class="even">
<td align="right">2015</td>
<td align="right">344</td>
<td align="right">189</td>
<td align="right">32</td>
<td align="right">38</td>
<td align="right">105</td>
<td align="right">203</td>
<td align="right">85</td>
<td align="right">61</td>
<td align="right">224</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="right">2014</td>
<td align="right">313</td>
<td align="right">165</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="right">128</td>
<td align="right">185</td>
<td align="right">84</td>
<td align="right">72</td>
<td align="right">206</td>
<td align="right">14</td>
</tr>
<tr class="even">
<td align="right">2013</td>
<td align="right">383</td>
<td align="right">186</td>
<td align="right">30</td>
<td align="right">16</td>
<td align="right">119</td>
<td align="right">168</td>
<td align="right">85</td>
<td align="right">51</td>
<td align="right">194</td>
<td align="right">17</td>
</tr>
</tbody>
</table>
<ol start="3" style="list-style-type: decimal">
<li>Percent of murders by relationship:</li>
</ol>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" title="1">murder_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb82-2" title="2"><span class="st">  </span><span class="kw">group_by</span> (relationship) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb82-3" title="3"><span class="st">  </span><span class="kw">summarise</span> (<span class="dt">num_of_cases =</span> <span class="kw">n</span>() ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb82-4" title="4"><span class="st">  </span><span class="kw">mutate</span> (<span class="dt">total_cases =</span> <span class="kw">sum</span>(num_of_cases) ,</a>
<a class="sourceLine" id="cb82-5" title="5">          <span class="co"># This rounds to 1 digit.</span></a>
<a class="sourceLine" id="cb82-6" title="6">          <span class="dt">pct_cases =</span> <span class="kw">round</span> (num_of_cases <span class="op">/</span><span class="st"> </span>total_cases <span class="op">*</span><span class="st"> </span><span class="dv">100</span> , <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb82-7" title="7">          ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb82-8" title="8"><span class="st">  </span><span class="co"># you could un-select the total cases since they&#39;ll always be the same , but for illustratio purposes I&#39;m keeping it.</span></a>
<a class="sourceLine" id="cb82-9" title="9"><span class="st">  </span><span class="kw">arrange</span> ( <span class="kw">desc</span> (num_of_cases)) </a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["relationship"],"name":[1],"type":["chr"],"align":["left"]},{"label":["num_of_cases"],"name":[2],"type":["int"],"align":["right"]},{"label":["total_cases"],"name":[3],"type":["int"],"align":["right"]},{"label":["pct_cases"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Relationship not determined","2":"15774","3":"56075","4":"28.1"},{"1":"Acquaintance","2":"11935","3":"56075","4":"21.3"},{"1":"Stranger","2":"9988","3":"56075","4":"17.8"},{"1":"Wife","2":"2890","3":"56075","4":"5.2"},{"1":"Friend","2":"2368","3":"56075","4":"4.2"},{"1":"Other - known to victim","2":"2349","3":"56075","4":"4.2"},{"1":"Girlfriend","2":"1893","3":"56075","4":"3.4"},{"1":"Son","2":"1260","3":"56075","4":"2.2"},{"1":"Daughter","2":"1005","3":"56075","4":"1.8"},{"1":"Husband","2":"904","3":"56075","4":"1.6"},{"1":"Other family","2":"873","3":"56075","4":"1.6"},{"1":"Neighbor","2":"727","3":"56075","4":"1.3"},{"1":"Boyfriend","2":"669","3":"56075","4":"1.2"},{"1":"Mother","2":"559","3":"56075","4":"1.0"},{"1":"Brother","2":"534","3":"56075","4":"1.0"},{"1":"Father","2":"480","3":"56075","4":"0.9"},{"1":"In-law","2":"365","3":"56075","4":"0.7"},{"1":"Ex-wife","2":"287","3":"56075","4":"0.5"},{"1":"Common-law wife","2":"178","3":"56075","4":"0.3"},{"1":"Sister","2":"168","3":"56075","4":"0.3"},{"1":"Stepson","2":"163","3":"56075","4":"0.3"},{"1":"Stepfather","2":"159","3":"56075","4":"0.3"},{"1":"Homosexual relationship","2":"135","3":"56075","4":"0.2"},{"1":"Stepdaughter","2":"102","3":"56075","4":"0.2"},{"1":"Common-law husband","2":"84","3":"56075","4":"0.1"},{"1":"Ex-husband","2":"76","3":"56075","4":"0.1"},{"1":"Employer","2":"74","3":"56075","4":"0.1"},{"1":"Employee","2":"53","3":"56075","4":"0.1"},{"1":"Stepmother","2":"23","3":"56075","4":"0.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><strong>Alternative method with <code>janitor::tabyl</code></strong></p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" title="1">murder_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb83-2" title="2"><span class="st">  </span><span class="kw">tabyl</span> (relationship) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb83-3" title="3"><span class="st">  </span><span class="kw">adorn_pct_formatting</span> (<span class="dt">digits=</span><span class="dv">1</span>)   <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb83-4" title="4"><span class="st">  </span><span class="co">#this last part turns it into a normal data frame</span></a>
<a class="sourceLine" id="cb83-5" title="5"><span class="st">  </span><span class="kw">arrange</span> ( <span class="kw">desc</span>(n)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb83-6" title="6"><span class="st">  </span><span class="kw">as_tibble</span>()</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["relationship"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["percent"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"Relationship not determined","2":"15774","3":"28.1%"},{"1":"Acquaintance","2":"11935","3":"21.3%"},{"1":"Stranger","2":"9988","3":"17.8%"},{"1":"Wife","2":"2890","3":"5.2%"},{"1":"Friend","2":"2368","3":"4.2%"},{"1":"Other - known to victim","2":"2349","3":"4.2%"},{"1":"Girlfriend","2":"1893","3":"3.4%"},{"1":"Son","2":"1260","3":"2.2%"},{"1":"Daughter","2":"1005","3":"1.8%"},{"1":"Husband","2":"904","3":"1.6%"},{"1":"Other family","2":"873","3":"1.6%"},{"1":"Neighbor","2":"727","3":"1.3%"},{"1":"Boyfriend","2":"669","3":"1.2%"},{"1":"Mother","2":"559","3":"1.0%"},{"1":"Brother","2":"534","3":"1.0%"},{"1":"Father","2":"480","3":"0.9%"},{"1":"In-law","2":"365","3":"0.7%"},{"1":"Ex-wife","2":"287","3":"0.5%"},{"1":"Common-law wife","2":"178","3":"0.3%"},{"1":"Sister","2":"168","3":"0.3%"},{"1":"Stepson","2":"163","3":"0.3%"},{"1":"Stepfather","2":"159","3":"0.3%"},{"1":"Homosexual relationship","2":"135","3":"0.2%"},{"1":"Stepdaughter","2":"102","3":"0.2%"},{"1":"Common-law husband","2":"84","3":"0.1%"},{"1":"Ex-husband","2":"76","3":"0.1%"},{"1":"Employer","2":"74","3":"0.1%"},{"1":"Employee","2":"53","3":"0.1%"},{"1":"Stepmother","2":"23","3":"0.0%"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Why is this answer not surprising? (Hint: Clark County, Nevada, has about half the population of Maricopa.) We’ll get to ways to normalize this in later chapters.</p>
<p>To just get the police shootings, filter the above query for <code>circumstance_code == "81"</code> before the <code>group_by</code></p>
<ol start="2" style="list-style-type: decimal">
<li>Murders by state and year</li>
</ol>
<p>(I’m putting the most recent year at the top)</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" title="1">murder_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb84-2" title="2"><span class="st">  </span><span class="kw">group_by</span> (year, state_abbr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb84-3" title="3"><span class="st">  </span><span class="kw">summarise</span> (<span class="dt">cases =</span> <span class="kw">n</span>() ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb84-4" title="4"><span class="st">  </span><span class="co">#bonus: Calculate the total number of cases by year:</span></a>
<a class="sourceLine" id="cb84-5" title="5"><span class="st">  </span><span class="kw">mutate</span> ( <span class="dt">total_cases =</span> <span class="kw">sum</span>(cases) )  <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb84-6" title="6"><span class="st">  </span><span class="kw">pivot_wider</span> (<span class="dt">names_from =</span> state_abbr, <span class="dt">values_from =</span> cases) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb84-7" title="7"><span class="st">  </span><span class="kw">arrange</span> ( <span class="kw">desc</span> (year)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb84-8" title="8"><span class="st">  </span><span class="co">#Extra! fancy table that requires the DT package.</span></a>
<a class="sourceLine" id="cb84-9" title="9"><span class="st">  </span><span class="kw">datatable</span>( <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">scrollX=</span> <span class="st">&quot;400px&quot;</span>, </a>
<a class="sourceLine" id="cb84-10" title="10">                            <span class="dt">pageLength =</span> <span class="st">&quot;5&quot;</span>, </a>
<a class="sourceLine" id="cb84-11" title="11">                            <span class="dt">lengthMenu =</span> <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb84-12" title="12">                            )</a>
<a class="sourceLine" id="cb84-13" title="13">             )</a></code></pre></div>
<p><div id="htmlwidget-35d280bdb487c630a1ad" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-35d280bdb487c630a1ad">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43"],[2018,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,1977,1976],[1613,1773,1448,1299,1227,1249,1223,1233,1241,1282,1351,1466,1467,1479,1464,1397,1373,1346,1149,1331,1417,1401,1475,1582,1541,1382,1383,1264,1153,1140,1300,1212,1350,1206,1117,1122,1135,1104,1295,1137,1056,949,943],[425,484,394,344,313,383,365,379,400,370,453,516,509,473,458,482,446,448,385,424,396,401,390,478,438,362,345,308,301,291,306,266,321,264,248,225,247,237,293,233,242,231,169],[248,252,208,189,165,186,172,167,145,165,160,161,176,177,216,190,181,154,134,201,195,175,182,219,187,221,232,213,166,166,206,211,247,204,192,214,193,230,198,171,194,176,183],[37,48,47,32,30,30,29,31,22,22,23,51,33,42,32,28,36,33,17,26,36,43,50,48,40,32,38,17,34,28,35,35,32,24,37,36,25,45,30,56,46,51,48],[40,43,37,38,30,16,23,19,23,28,28,15,21,23,29,22,13,22,12,11,11,16,null,19,null,null,20,18,1,22,19,null,2,30,32,23,1,23,29,33,36,30,27],[168,166,111,105,128,119,112,132,142,156,144,164,111,139,158,113,149,98,126,147,157,114,144,120,115,102,101,115,96,108,134,131,145,138,79,81,115,4,141,125,87,91,115],[239,311,228,203,185,168,136,155,175,183,183,208,242,225,187,202,191,197,135,174,184,196,227,174,176,137,136,139,105,98,104,82,110,101,97,118,130,159,154,125,93,83,78],[115,131,111,85,84,85,97,92,93,98,92,82,107,97,105,78,76,102,71,95,140,113,139,146,178,154,163,163,125,148,161,166,184,133,147,113,143,118,141,112,121,106,98],[69,82,76,61,72,51,57,55,58,41,47,65,52,60,58,61,57,82,54,58,66,75,67,78,70,69,54,55,53,46,48,56,55,53,49,56,55,54,53,54,49,36,41],[255,242,213,224,206,194,215,183,175,207,210,186,207,226,208,204,208,199,203,182,215,250,258,288,317,287,274,221,249,211,273,254,225,234,216,226,192,208,222,184,164,129,162],[17,14,23,18,14,17,17,20,8,12,11,18,9,17,13,17,16,11,12,13,17,18,18,12,20,18,20,15,23,22,14,11,29,25,20,30,34,26,34,44,24,16,22]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>year<\/th>\n      <th>total_cases<\/th>\n      <th>AZ<\/th>\n      <th>CO<\/th>\n      <th>ID<\/th>\n      <th>MT<\/th>\n      <th>NM<\/th>\n      <th>NV<\/th>\n      <th>OR<\/th>\n      <th>UT<\/th>\n      <th>WA<\/th>\n      <th>WY<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":"400px","pageLength":"5","lengthMenu":[5,10,50],"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10,11,12]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
Does this mean that these states have suddenly become more dangerous? What about population growth?</p>
<p>NOTE: Later on, we’ll get to other packages, which includes <code>janitor</code> – a useful way to clean data. That package has a much easier way to produce tables while formatting them well. If you’ve already installed and loaded the package, here’s another way to do the same thing:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" title="1">murder_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb85-2" title="2"><span class="st">  </span><span class="kw">tabyl</span> ( year , state_abbr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb85-3" title="3"><span class="st">  </span><span class="kw">arrange</span> ( <span class="kw">desc</span> (year) ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb85-4" title="4"><span class="st">  </span><span class="kw">head</span> () <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb85-5" title="5"><span class="st">  </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="right">AZ</th>
<th align="right">CO</th>
<th align="right">ID</th>
<th align="right">MT</th>
<th align="right">NM</th>
<th align="right">NV</th>
<th align="right">OR</th>
<th align="right">UT</th>
<th align="right">WA</th>
<th align="right">WY</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2018</td>
<td align="right">425</td>
<td align="right">248</td>
<td align="right">37</td>
<td align="right">40</td>
<td align="right">168</td>
<td align="right">239</td>
<td align="right">115</td>
<td align="right">69</td>
<td align="right">255</td>
<td align="right">17</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">484</td>
<td align="right">252</td>
<td align="right">48</td>
<td align="right">43</td>
<td align="right">166</td>
<td align="right">311</td>
<td align="right">131</td>
<td align="right">82</td>
<td align="right">242</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="right">2016</td>
<td align="right">394</td>
<td align="right">208</td>
<td align="right">47</td>
<td align="right">37</td>
<td align="right">111</td>
<td align="right">228</td>
<td align="right">111</td>
<td align="right">76</td>
<td align="right">213</td>
<td align="right">23</td>
</tr>
<tr class="even">
<td align="right">2015</td>
<td align="right">344</td>
<td align="right">189</td>
<td align="right">32</td>
<td align="right">38</td>
<td align="right">105</td>
<td align="right">203</td>
<td align="right">85</td>
<td align="right">61</td>
<td align="right">224</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="right">2014</td>
<td align="right">313</td>
<td align="right">165</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="right">128</td>
<td align="right">185</td>
<td align="right">84</td>
<td align="right">72</td>
<td align="right">206</td>
<td align="right">14</td>
</tr>
<tr class="even">
<td align="right">2013</td>
<td align="right">383</td>
<td align="right">186</td>
<td align="right">30</td>
<td align="right">16</td>
<td align="right">119</td>
<td align="right">168</td>
<td align="right">85</td>
<td align="right">51</td>
<td align="right">194</td>
<td align="right">17</td>
</tr>
</tbody>
</table>
<ol start="3" style="list-style-type: decimal">
<li>Percent of murders by relationship:</li>
</ol>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" title="1">murder_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb86-2" title="2"><span class="st">  </span><span class="kw">group_by</span> (relationship) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb86-3" title="3"><span class="st">  </span><span class="kw">summarise</span> (<span class="dt">num_of_cases =</span> <span class="kw">n</span>() ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb86-4" title="4"><span class="st">  </span><span class="kw">mutate</span> (<span class="dt">total_cases =</span> <span class="kw">sum</span>(num_of_cases) ,</a>
<a class="sourceLine" id="cb86-5" title="5">          <span class="co"># This rounds to 1 digit.</span></a>
<a class="sourceLine" id="cb86-6" title="6">          <span class="dt">pct_cases =</span> <span class="kw">round</span> (num_of_cases <span class="op">/</span><span class="st"> </span>total_cases <span class="op">*</span><span class="st"> </span><span class="dv">100</span> , <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb86-7" title="7">          ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb86-8" title="8"><span class="st">  </span><span class="co"># you could un-select the total cases since they&#39;ll always be the same , but for illustratio purposes I&#39;m keeping it.</span></a>
<a class="sourceLine" id="cb86-9" title="9"><span class="st">  </span><span class="kw">arrange</span> ( <span class="kw">desc</span> (num_of_cases)) </a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["relationship"],"name":[1],"type":["chr"],"align":["left"]},{"label":["num_of_cases"],"name":[2],"type":["int"],"align":["right"]},{"label":["total_cases"],"name":[3],"type":["int"],"align":["right"]},{"label":["pct_cases"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Relationship not determined","2":"15774","3":"56075","4":"28.1"},{"1":"Acquaintance","2":"11935","3":"56075","4":"21.3"},{"1":"Stranger","2":"9988","3":"56075","4":"17.8"},{"1":"Wife","2":"2890","3":"56075","4":"5.2"},{"1":"Friend","2":"2368","3":"56075","4":"4.2"},{"1":"Other - known to victim","2":"2349","3":"56075","4":"4.2"},{"1":"Girlfriend","2":"1893","3":"56075","4":"3.4"},{"1":"Son","2":"1260","3":"56075","4":"2.2"},{"1":"Daughter","2":"1005","3":"56075","4":"1.8"},{"1":"Husband","2":"904","3":"56075","4":"1.6"},{"1":"Other family","2":"873","3":"56075","4":"1.6"},{"1":"Neighbor","2":"727","3":"56075","4":"1.3"},{"1":"Boyfriend","2":"669","3":"56075","4":"1.2"},{"1":"Mother","2":"559","3":"56075","4":"1.0"},{"1":"Brother","2":"534","3":"56075","4":"1.0"},{"1":"Father","2":"480","3":"56075","4":"0.9"},{"1":"In-law","2":"365","3":"56075","4":"0.7"},{"1":"Ex-wife","2":"287","3":"56075","4":"0.5"},{"1":"Common-law wife","2":"178","3":"56075","4":"0.3"},{"1":"Sister","2":"168","3":"56075","4":"0.3"},{"1":"Stepson","2":"163","3":"56075","4":"0.3"},{"1":"Stepfather","2":"159","3":"56075","4":"0.3"},{"1":"Homosexual relationship","2":"135","3":"56075","4":"0.2"},{"1":"Stepdaughter","2":"102","3":"56075","4":"0.2"},{"1":"Common-law husband","2":"84","3":"56075","4":"0.1"},{"1":"Ex-husband","2":"76","3":"56075","4":"0.1"},{"1":"Employer","2":"74","3":"56075","4":"0.1"},{"1":"Employee","2":"53","3":"56075","4":"0.1"},{"1":"Stepmother","2":"23","3":"56075","4":"0.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Again, using the <code>tabyl</code> function from the <code>janitor</code> package:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" title="1">murder_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb87-2" title="2"><span class="st">  </span><span class="kw">tabyl</span> (relationship) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb87-3" title="3"><span class="st">  </span><span class="kw">adorn_pct_formatting</span> (<span class="dt">digits=</span><span class="dv">1</span>)  <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb87-4" title="4"><span class="st">  </span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">relationship</th>
<th align="right">n</th>
<th align="left">percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Acquaintance</td>
<td align="right">11935</td>
<td align="left">21.3%</td>
</tr>
<tr class="even">
<td align="left">Boyfriend</td>
<td align="right">669</td>
<td align="left">1.2%</td>
</tr>
<tr class="odd">
<td align="left">Brother</td>
<td align="right">534</td>
<td align="left">1.0%</td>
</tr>
<tr class="even">
<td align="left">Common-law husband</td>
<td align="right">84</td>
<td align="left">0.1%</td>
</tr>
<tr class="odd">
<td align="left">Common-law wife</td>
<td align="right">178</td>
<td align="left">0.3%</td>
</tr>
<tr class="even">
<td align="left">Daughter</td>
<td align="right">1005</td>
<td align="left">1.8%</td>
</tr>
<tr class="odd">
<td align="left">Employee</td>
<td align="right">53</td>
<td align="left">0.1%</td>
</tr>
<tr class="even">
<td align="left">Employer</td>
<td align="right">74</td>
<td align="left">0.1%</td>
</tr>
<tr class="odd">
<td align="left">Ex-husband</td>
<td align="right">76</td>
<td align="left">0.1%</td>
</tr>
<tr class="even">
<td align="left">Ex-wife</td>
<td align="right">287</td>
<td align="left">0.5%</td>
</tr>
<tr class="odd">
<td align="left">Father</td>
<td align="right">480</td>
<td align="left">0.9%</td>
</tr>
<tr class="even">
<td align="left">Friend</td>
<td align="right">2368</td>
<td align="left">4.2%</td>
</tr>
<tr class="odd">
<td align="left">Girlfriend</td>
<td align="right">1893</td>
<td align="left">3.4%</td>
</tr>
<tr class="even">
<td align="left">Homosexual relationship</td>
<td align="right">135</td>
<td align="left">0.2%</td>
</tr>
<tr class="odd">
<td align="left">Husband</td>
<td align="right">904</td>
<td align="left">1.6%</td>
</tr>
<tr class="even">
<td align="left">In-law</td>
<td align="right">365</td>
<td align="left">0.7%</td>
</tr>
<tr class="odd">
<td align="left">Mother</td>
<td align="right">559</td>
<td align="left">1.0%</td>
</tr>
<tr class="even">
<td align="left">Neighbor</td>
<td align="right">727</td>
<td align="left">1.3%</td>
</tr>
<tr class="odd">
<td align="left">Other - known to victim</td>
<td align="right">2349</td>
<td align="left">4.2%</td>
</tr>
<tr class="even">
<td align="left">Other family</td>
<td align="right">873</td>
<td align="left">1.6%</td>
</tr>
<tr class="odd">
<td align="left">Relationship not determined</td>
<td align="right">15774</td>
<td align="left">28.1%</td>
</tr>
<tr class="even">
<td align="left">Sister</td>
<td align="right">168</td>
<td align="left">0.3%</td>
</tr>
<tr class="odd">
<td align="left">Son</td>
<td align="right">1260</td>
<td align="left">2.2%</td>
</tr>
<tr class="even">
<td align="left">Stepdaughter</td>
<td align="right">102</td>
<td align="left">0.2%</td>
</tr>
<tr class="odd">
<td align="left">Stepfather</td>
<td align="right">159</td>
<td align="left">0.3%</td>
</tr>
<tr class="even">
<td align="left">Stepmother</td>
<td align="right">23</td>
<td align="left">0.0%</td>
</tr>
<tr class="odd">
<td align="left">Stepson</td>
<td align="right">163</td>
<td align="left">0.3%</td>
</tr>
<tr class="even">
<td align="left">Stranger</td>
<td align="right">9988</td>
<td align="left">17.8%</td>
</tr>
<tr class="odd">
<td align="left">Wife</td>
<td align="right">2890</td>
<td align="left">5.2%</td>
</tr>
</tbody>
</table>
</div>
<div id="putting-it-all-together-1" class="section level4 unnumbered">
<h4>Putting it all together</h4>
<p>First, isolate the domestic violence cases. Let’s see what our choices are:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" title="1">murder_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb88-2" title="2"><span class="st">  </span><span class="kw">group_by</span> (relationship_code, relationship) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb88-3" title="3"><span class="st">  </span><span class="kw">summarise</span> (<span class="kw">n</span>())</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["relationship_code"],"name":[1],"type":["chr"],"align":["left"]},{"label":["relationship"],"name":[2],"type":["chr"],"align":["left"]},{"label":["n()"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"AQ","2":"Acquaintance","3":"11935"},{"1":"BF","2":"Boyfriend","3":"669"},{"1":"BR","2":"Brother","3":"534"},{"1":"CH","2":"Common-law husband","3":"84"},{"1":"CW","2":"Common-law wife","3":"178"},{"1":"DA","2":"Daughter","3":"1005"},{"1":"EE","2":"Employee","3":"53"},{"1":"ER","2":"Employer","3":"74"},{"1":"FA","2":"Father","3":"480"},{"1":"FR","2":"Friend","3":"2368"},{"1":"GF","2":"Girlfriend","3":"1893"},{"1":"HO","2":"Homosexual relationship","3":"135"},{"1":"HU","2":"Husband","3":"904"},{"1":"IL","2":"In-law","3":"365"},{"1":"MO","2":"Mother","3":"559"},{"1":"NE","2":"Neighbor","3":"727"},{"1":"OF","2":"Other family","3":"873"},{"1":"OK","2":"Other - known to victim","3":"2349"},{"1":"SD","2":"Stepdaughter","3":"102"},{"1":"SF","2":"Stepfather","3":"159"},{"1":"SI","2":"Sister","3":"168"},{"1":"SM","2":"Stepmother","3":"23"},{"1":"SO","2":"Son","3":"1260"},{"1":"SS","2":"Stepson","3":"163"},{"1":"ST","2":"Stranger","3":"9988"},{"1":"UN","2":"Relationship not determined","3":"15774"},{"1":"WI","2":"Wife","3":"2890"},{"1":"XH","2":"Ex-husband","3":"76"},{"1":"XW","2":"Ex-wife","3":"287"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Here’s one way to get the answer (eliminating cases in which we don’t know the victim’s ethnicity)</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" title="1">murder_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb89-2" title="2"><span class="st">  </span><span class="kw">filter</span> ( relationship_code <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BF&quot;</span>, <span class="st">&quot;BR&quot;</span>, <span class="st">&quot;CH&quot;</span>, <span class="st">&quot;CW&quot;</span>, <span class="st">&quot;DA&quot;</span>, <span class="st">&quot;FA&quot;</span>, </a>
<a class="sourceLine" id="cb89-3" title="3">                                    <span class="st">&quot;GF&quot;</span>, <span class="st">&quot;HO&quot;</span>, <span class="st">&quot;HU&quot;</span>, <span class="st">&quot;IL&quot;</span>, <span class="st">&quot;MO&quot;</span>, <span class="st">&quot;OF&quot;</span>, <span class="st">&quot;SD&quot;</span>, <span class="st">&quot;SF&quot;</span>, </a>
<a class="sourceLine" id="cb89-4" title="4">                                    <span class="st">&quot;SI&quot;</span>, <span class="st">&quot;SM&quot;</span>, <span class="st">&quot;SO&quot;</span>, <span class="st">&quot;WI&quot;</span>, <span class="st">&quot;XH&quot;</span>, <span class="st">&quot;XW&quot;</span>)   <span class="op">&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb89-5" title="5"><span class="st">          </span>vic_ethnic_code <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;H&quot;</span>, <span class="st">&quot;N&quot;</span>)</a>
<a class="sourceLine" id="cb89-6" title="6">        ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb89-7" title="7"><span class="st">   </span><span class="kw">group_by</span> ( state_abbr, vic_ethnic ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb89-8" title="8"><span class="st">   </span><span class="kw">summarise</span> (<span class="dt">cases =</span> <span class="kw">n</span>() ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb89-9" title="9"><span class="st">   </span><span class="co">#calculate total by state and percent</span></a>
<a class="sourceLine" id="cb89-10" title="10"><span class="st">   </span><span class="kw">mutate</span> ( <span class="dt">total_cases =</span> <span class="kw">sum</span>(cases), </a>
<a class="sourceLine" id="cb89-11" title="11">            <span class="dt">pct_cases =</span> cases <span class="op">/</span><span class="st"> </span>total_cases <span class="op">*</span><span class="st"> </span><span class="dv">100</span> ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb89-12" title="12"><span class="st">   </span><span class="co">#get rid of case counts</span></a>
<a class="sourceLine" id="cb89-13" title="13"><span class="st">   </span><span class="kw">select</span> ( <span class="op">-</span>cases ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb89-14" title="14"><span class="st">   </span><span class="co">#sort by state</span></a>
<a class="sourceLine" id="cb89-15" title="15"><span class="st">   </span><span class="kw">arrange</span> ( state_abbr ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb89-16" title="16"><span class="st">   </span><span class="co"># put ethnicity in columns</span></a>
<a class="sourceLine" id="cb89-17" title="17"><span class="st">   </span><span class="kw">pivot_wider</span> ( <span class="dt">values_from =</span> pct_cases, <span class="dt">names_from =</span> vic_ethnic)  </a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state_abbr"],"name":[1],"type":["chr"],"align":["left"]},{"label":["total_cases"],"name":[2],"type":["int"],"align":["right"]},{"label":["Hispanic origin"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Not of Hispanic origin"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"AZ","2":"2289","3":"26.256007","4":"73.74399"},{"1":"CO","2":"367","3":"21.253406","4":"78.74659"},{"1":"ID","2":"92","3":"10.869565","4":"89.13043"},{"1":"MT","2":"32","3":"12.500000","4":"87.50000"},{"1":"NM","2":"258","3":"59.302326","4":"40.69767"},{"1":"NV","2":"259","3":"18.146718","4":"81.85328"},{"1":"OR","2":"883","3":"5.209513","4":"94.79049"},{"1":"UT","2":"92","3":"13.043478","4":"86.95652"},{"1":"WA","2":"578","3":"7.958478","4":"92.04152"},{"1":"WY","2":"65","3":"13.846154","4":"86.15385"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><strong>Alternative Using the <code>janitor::tabyl</code> function</strong></p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" title="1">murder_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb90-2" title="2"><span class="st">  </span><span class="kw">filter</span> ( relationship_code <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BF&quot;</span>, <span class="st">&quot;BR&quot;</span>, <span class="st">&quot;CH&quot;</span>, <span class="st">&quot;CW&quot;</span>, <span class="st">&quot;DA&quot;</span>, <span class="st">&quot;FA&quot;</span>, </a>
<a class="sourceLine" id="cb90-3" title="3">                                    <span class="st">&quot;GF&quot;</span>, <span class="st">&quot;HO&quot;</span>, <span class="st">&quot;HU&quot;</span>, <span class="st">&quot;IL&quot;</span>, <span class="st">&quot;MO&quot;</span>, <span class="st">&quot;OF&quot;</span>, <span class="st">&quot;SD&quot;</span>, <span class="st">&quot;SF&quot;</span>, </a>
<a class="sourceLine" id="cb90-4" title="4">                                    <span class="st">&quot;SI&quot;</span>, <span class="st">&quot;SM&quot;</span>, <span class="st">&quot;SO&quot;</span>, <span class="st">&quot;WI&quot;</span>, <span class="st">&quot;XH&quot;</span>, <span class="st">&quot;XW&quot;</span>)   <span class="op">&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb90-5" title="5"><span class="st">          </span>vic_ethnic_code <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;H&quot;</span>, <span class="st">&quot;N&quot;</span>)</a>
<a class="sourceLine" id="cb90-6" title="6">        ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb90-7" title="7"><span class="st">  </span><span class="kw">tabyl</span> ( state_abbr, vic_ethnic) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb90-8" title="8"><span class="st">  </span><span class="co"># include column and row totals</span></a>
<a class="sourceLine" id="cb90-9" title="9"><span class="st">  </span><span class="kw">adorn_totals</span> ( <span class="kw">c</span>(<span class="st">&quot;row&quot;</span>, <span class="st">&quot;col&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb90-10" title="10"><span class="st">  </span><span class="co">#calculate % of row total (within state)</span></a>
<a class="sourceLine" id="cb90-11" title="11"><span class="st">  </span><span class="kw">adorn_percentages</span> ( <span class="st">&quot;row&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb90-12" title="12"><span class="st">  </span><span class="co"># remove decimal places</span></a>
<a class="sourceLine" id="cb90-13" title="13"><span class="st">  </span><span class="kw">adorn_pct_formatting</span> (<span class="dt">digits=</span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb90-14" title="14"><span class="st">  </span><span class="co"># include # of cases</span></a>
<a class="sourceLine" id="cb90-15" title="15"><span class="st">  </span>adorn_ns <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb90-16" title="16"><span class="st">  </span><span class="co"># turn it into a regular data frame</span></a>
<a class="sourceLine" id="cb90-17" title="17"><span class="st">  </span><span class="kw">as_tibble</span>()</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state_abbr"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Hispanic origin"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Not of Hispanic origin"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Total"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"AZ","2":"26.3%  (601)","3":"73.7% (1688)","4":"100.0% (2289)"},{"1":"CO","2":"21.3%   (78)","3":"78.7%  (289)","4":"100.0%  (367)"},{"1":"ID","2":"10.9%   (10)","3":"89.1%   (82)","4":"100.0%   (92)"},{"1":"MT","2":"12.5%    (4)","3":"87.5%   (28)","4":"100.0%   (32)"},{"1":"NM","2":"59.3%  (153)","3":"40.7%  (105)","4":"100.0%  (258)"},{"1":"NV","2":"18.1%   (47)","3":"81.9%  (212)","4":"100.0%  (259)"},{"1":"OR","2":"5.2%   (46)","3":"94.8%  (837)","4":"100.0%  (883)"},{"1":"UT","2":"13.0%   (12)","3":"87.0%   (80)","4":"100.0%   (92)"},{"1":"WA","2":"8.0%   (46)","3":"92.0%  (532)","4":"100.0%  (578)"},{"1":"WY","2":"13.8%    (9)","3":"86.2%   (56)","4":"100.0%   (65)"},{"1":"Total","2":"20.5% (1006)","3":"79.5% (3909)","4":"100.0% (4915)"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>

</div>
</div>
</div>
</div>










<div class="footnotes">
<hr />
<ol start="5">
<li id="fn5"><p> If you wanted to go further with filtering, you might look at the <code>regular expressions</code> available for more sophisticated filtering using the <code>str_detect</code> function. In this case, <code>str_detect (weapon_code, "^1")</code> searches for anything in the field that begins with a “1”.<a href="A04-murders.html#fnref5" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="A01-resources.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["twitter", "github"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toc_depth": 2
});
});
</script>

</body>

</html>
