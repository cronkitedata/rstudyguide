<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter5 More verbs: group_by and summarise | book-example.utf8.md</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter5 More verbs: group_by and summarise | book-example.utf8.md" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter5 More verbs: group_by and summarise | book-example.utf8.md" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="verbs-part-1-select-and-filter.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Study Guide for Cronkite Students</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html"><i class="fa fa-check"></i><b>1</b> R an R Studio tour</a><ul>
<li class="chapter" data-level="1.1" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#why-program"><i class="fa fa-check"></i><b>1.1</b> Why program?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#why-r"><i class="fa fa-check"></i><b>1.1.1</b> Why R?</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#setting-up-r-and-r-studio"><i class="fa fa-check"></i><b>1.2</b> Setting up R and R Studio</a><ul>
<li class="chapter" data-level="1.2.1" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#rstudio-cloud"><i class="fa fa-check"></i><b>1.2.1</b> RStudio Cloud</a></li>
<li class="chapter" data-level="1.2.2" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#install-yourself"><i class="fa fa-check"></i><b>1.2.2</b> Install yourself</a></li>
<li class="chapter" data-level="1.2.3" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#an-r-studio-tour"><i class="fa fa-check"></i><b>1.2.3</b> An R Studio tour</a></li>
<li class="chapter" data-level="1.2.4" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#the-console"><i class="fa fa-check"></i><b>1.2.4</b> The Console</a></li>
<li class="chapter" data-level="1.2.5" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#packages"><i class="fa fa-check"></i><b>1.2.5</b> Packages</a></li>
<li class="chapter" data-level="1.2.6" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#work-in-projects"><i class="fa fa-check"></i><b>1.2.6</b> Work in projects</a></li>
<li class="chapter" data-level="1.2.7" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#error-messages"><i class="fa fa-check"></i><b>1.2.7</b> Error messages</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#resources-and-exercises"><i class="fa fa-check"></i><b>1.3</b> Resources and exercises</a><ul>
<li class="chapter" data-level="1.3.1" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#take-the-swirl-tutorial"><i class="fa fa-check"></i><b>1.3.1</b> Take the swirl() tutorial</a></li>
<li class="chapter" data-level="1.3.2" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#programming-concepts"><i class="fa fa-check"></i><b>1.3.2</b> Programming concepts</a></li>
<li class="chapter" data-level="1.3.3" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#r-and-r-studio"><i class="fa fa-check"></i><b>1.3.3</b> R and R Studio</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="r-an-r-studio-tour.html"><a href="r-an-r-studio-tour.html#what-did-you-learn"><i class="fa fa-check"></i><b>1.4</b> What did you learn?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>2</b> R Markdown</a><ul>
<li class="chapter" data-level="2.1" data-path="r-markdown.html"><a href="r-markdown.html#understanding-markdown"><i class="fa fa-check"></i><b>2.1</b> Understanding Markdown</a><ul>
<li class="chapter" data-level="2.1.1" data-path="r-markdown.html"><a href="r-markdown.html#formatting-in-markdown"><i class="fa fa-check"></i><b>2.1.1</b> Formatting in Markdown</a></li>
<li class="chapter" data-level="2.1.2" data-path="r-markdown.html"><a href="r-markdown.html#code-chunks"><i class="fa fa-check"></i><b>2.1.2</b> Code chunks</a></li>
<li class="chapter" data-level="2.1.3" data-path="r-markdown.html"><a href="r-markdown.html#viewing-your-document"><i class="fa fa-check"></i><b>2.1.3</b> Viewing your document</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="r-markdown.html"><a href="r-markdown.html#resources"><i class="fa fa-check"></i><b>2.2</b> Resources</a></li>
<li class="chapter" data-level="2.3" data-path="r-markdown.html"><a href="r-markdown.html#exercises-and-assignments"><i class="fa fa-check"></i><b>2.3</b> Exercises and assignments</a></li>
<li class="chapter" data-level="2.4" data-path="r-markdown.html"><a href="r-markdown.html#what-you-learned"><i class="fa fa-check"></i><b>2.4</b> What you learned</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-frames-and-the-tidyverse.html"><a href="data-frames-and-the-tidyverse.html"><i class="fa fa-check"></i><b>3</b> Data frames and the tidyverse</a><ul>
<li class="chapter" data-level="3.1" data-path="data-frames-and-the-tidyverse.html"><a href="data-frames-and-the-tidyverse.html#the-tidyverse"><i class="fa fa-check"></i><b>3.1</b> The tidyverse</a></li>
<li class="chapter" data-level="3.2" data-path="data-frames-and-the-tidyverse.html"><a href="data-frames-and-the-tidyverse.html#loading-data"><i class="fa fa-check"></i><b>3.2</b> Loading data</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-frames-and-the-tidyverse.html"><a href="data-frames-and-the-tidyverse.html#column-names"><i class="fa fa-check"></i><b>3.2.1</b> Column names</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-frames-and-the-tidyverse.html"><a href="data-frames-and-the-tidyverse.html#what-you-learned-1"><i class="fa fa-check"></i><b>3.3</b> What you learned</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html"><i class="fa fa-check"></i><b>4</b> Verbs part 1: Select and filter</a><ul>
<li class="chapter" data-level="4.1" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html#building-a-query"><i class="fa fa-check"></i><b>4.1</b> Building a query</a></li>
<li class="chapter" data-level="4.2" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html#select---choosing-columns"><i class="fa fa-check"></i><b>4.2</b> Select - choosing columns</a></li>
<li class="chapter" data-level="4.3" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html#filter---choosing-rows"><i class="fa fa-check"></i><b>4.3</b> Filter - choosing rows</a><ul>
<li class="chapter" data-level="4.3.1" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html#one-filter"><i class="fa fa-check"></i><b>4.3.1</b> One filter</a></li>
<li class="chapter" data-level="4.3.2" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html#a-compound-filter"><i class="fa fa-check"></i><b>4.3.2</b> A compound filter</a></li>
<li class="chapter" data-level="4.3.3" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html#an-even-more-compound-filter"><i class="fa fa-check"></i><b>4.3.3</b> An even more compound filter</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html#arrange---change-the-order"><i class="fa fa-check"></i><b>4.4</b> Arrange - change the order</a></li>
<li class="chapter" data-level="4.5" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html#traps"><i class="fa fa-check"></i><b>4.5</b> Traps</a><ul>
<li class="chapter" data-level="4.5.1" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html#case-sensitivity"><i class="fa fa-check"></i><b>4.5.1</b> Case-sensitivity</a></li>
<li class="chapter" data-level="4.5.2" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html#equals-versus-double-equals"><i class="fa fa-check"></i><b>4.5.2</b> Equals versus double-equals</a></li>
<li class="chapter" data-level="4.5.3" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html#forgetting-the-and-then-operator"><i class="fa fa-check"></i><b>4.5.3</b> Forgetting the “and then” operator (%&gt;%)</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html#resources-1"><i class="fa fa-check"></i><b>4.6</b> Resources</a><ul>
<li class="chapter" data-level="4.6.1" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html#tutorials"><i class="fa fa-check"></i><b>4.6.1</b> Tutorials</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="verbs-part-1-select-and-filter.html"><a href="verbs-part-1-select-and-filter.html#what-you-learned-2"><i class="fa fa-check"></i><b>4.7</b> What you learned</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="more-verbs-group-by-and-summarise.html"><a href="more-verbs-group-by-and-summarise.html"><i class="fa fa-check"></i><b>5</b> More verbs: group_by and summarise</a><ul>
<li class="chapter" data-level="5.1" data-path="more-verbs-group-by-and-summarise.html"><a href="more-verbs-group-by-and-summarise.html#group_by-summarise-verbs"><i class="fa fa-check"></i><b>5.1</b> group_by / summarise () verbs</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="more-verbs-group_by-and-summarise" class="section level1">
<h1><span class="header-section-number">Chapter5</span> More verbs: group_by and summarise</h1>
<p>We’ve read the Serial Killer Detective from the New Yorker in class. The project makes the dataset public, and Andrew Ba Tran uses the entire country’s data in his online course at <a href="https://learn.r-journalism.com/en/">R for Journalists</a>. I’ve taken that dataset, made it a little simpler and pulled out just the Arizona cases.</p>
<p>As always, load the tidyverse</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>And load a dataset saved in native R format from our course website:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1"><span class="co">#load (&quot;murder_data_v2.Rdata&quot;)</span></a>
<a class="sourceLine" id="cb37-2" title="2"><span class="kw">load</span> (<span class="kw">url</span>(<span class="st">&quot;https://cronkitedata.github.io/cronkite-docs/r-stats/murder_data_v2.RData&quot;</span>))</a>
<a class="sourceLine" id="cb37-3" title="3"></a>
<a class="sourceLine" id="cb37-4" title="4"><span class="co">#print out the structure of the dataset</span></a>
<a class="sourceLine" id="cb37-5" title="5"><span class="kw">str</span>(murder_data_v2)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    14484 obs. of  24 variables:
##  $ id               : chr  &quot;197601001AZ00301&quot; &quot;197601001AZ00700&quot; &quot;197601001AZ00705&quot; &quot;197601001AZ00707&quot; ...
##  $ county_code      : chr  &quot;04005          &quot; &quot;04013          &quot; &quot;04013          &quot; &quot;04013          &quot; ...
##  $ ori_code         : chr  &quot;AZ00301&quot; &quot;AZ00700&quot; &quot;AZ00705&quot; &quot;AZ00707&quot; ...
##  $ state_name       : Factor w/ 54 levels &quot;Alaska&quot;,&quot;Alabama&quot;,..: 4 4 4 4 4 4 4 4 4 4 ...
##  $ agency_name      : chr  &quot;Flagstaff&quot; &quot;Maricopa County&quot; &quot;Chandler&quot; &quot;El Mirage&quot; ...
##  $ solved           : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 2 1 2 2 2 2 2 2 1 2 ...
##  $ year             : num  1976 1976 1976 1976 1976 ...
##  $ month            : Factor w/ 12 levels &quot;January&quot;,&quot;February&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ situation_code   : int  1 2 1 1 1 1 1 1 2 1 ...
##  $ situation        : chr  &quot;Single victim/single offender&quot; &quot;Single victim/unknown offender(s)&quot; &quot;Single victim/single offender&quot; &quot;Single victim/single offender&quot; ...
##  $ victim_age       : num  1 18 19 20 43 0 38 26 67 58 ...
##  $ victim_sex       : Factor w/ 3 levels &quot;Female&quot;,&quot;Male&quot;,..: 2 1 2 2 2 1 2 2 2 2 ...
##  $ victim_race      : Factor w/ 5 levels &quot;Asian or Pacific Islander&quot;,..: 5 5 5 2 5 5 5 2 5 5 ...
##  $ victim_hisp      : Factor w/ 3 levels &quot;Hispanic origin&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
##  $ offend_age       : num  20 999 51 24 32 19 44 27 999 29 ...
##  $ offend_sex       : Factor w/ 3 levels &quot;Female&quot;,&quot;Male&quot;,..: 2 3 2 1 2 1 1 2 3 2 ...
##  $ offend_race      : Factor w/ 5 levels &quot;Asian or Pacific Islander&quot;,..: 5 4 5 2 2 5 5 5 4 5 ...
##  $ offend_hisp      : Factor w/ 3 levels &quot;Hispanic origin&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
##  $ weapon_code      : int  8 6 2 2 6 8 2 4 12 4 ...
##  $ weapon           : chr  &quot;Personal weapons, includes beating&quot; &quot;Knife or cutting instrument&quot; &quot;Handgun - pistol, revolver, etc&quot; &quot;Handgun - pistol, revolver, etc&quot; ...
##  $ relationship_code: int  24 26 25 2 12 6 5 25 26 12 ...
##  $ relationship     : chr  &quot;Stepson&quot; &quot;Relationship not determined&quot; &quot;Stranger&quot; &quot;Boyfriend&quot; ...
##  $ circumstance_code: int  28 32 30 18 29 11 18 31 6 18 ...
##  $ circumstance     : chr  &quot;Other&quot; &quot;Circumstances undetermined&quot; &quot;Felon killed by private citizen&quot; &quot;Other arguments&quot; ...</code></pre>
<div id="group_by-summarise-verbs" class="section level2">
<h2><span class="header-section-number">5.1</span> group_by / summarise () verbs</h2>
<p>Group_by and summarise () almost always go together, the way that a pivot always has one element in the row or column area, and another element that produces the numbers in middle. In fact, almost everything we’ve done so far has a corrollary in an Excel data sheet or pivot table:</p>
<div class="figure">
<img src="images/21-excel-to-groupby.png" alt="xl-to-groupby" />
<p class="caption">xl-to-groupby</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="verbs-part-1-select-and-filter.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
